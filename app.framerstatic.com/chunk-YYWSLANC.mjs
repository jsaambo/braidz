import{a as Je}from"https://app.framerstatic.com/chunk-KCILMCSM.mjs";import{a as Qe,b as Xe}from"https://app.framerstatic.com/chunk-ENVN7SZK.mjs";import{o as ne}from"https://app.framerstatic.com/chunk-ALMIM4K3.mjs";import{a as $e,b as Ge}from"https://app.framerstatic.com/chunk-QFF2HNPA.mjs";import{e as De}from"https://app.framerstatic.com/chunk-HQZYWAIC.mjs";import{Cb as _e,Ee as oe,Ie as He,Ke as ce,Ue as de,Yf as Ke,Zf as ze,lg as Ye,ob as Fe,vf as Ue,xe as je,ye as Ae}from"https://app.framerstatic.com/chunk-SJWII7XM.mjs";import{a as Be}from"https://app.framerstatic.com/chunk-QFU6OGL3.mjs";import{ad as te,dd as O}from"https://app.framerstatic.com/chunk-JQGQBMDT.mjs";import{$b as ve,Ai as D,Kb as Te,Mp as xe,Pl as B,Pp as Ve,Sp as ee,Tp as F,ac as ye,ai as V,bq as _,cq as j,eq as Ne,hq as we,kv as We,l as G,me as Le,op as q,wd as J,xi as Z,yi as Re,zh as ke,zi as p}from"https://app.framerstatic.com/chunk-HOZEDTF7.mjs";import{g as Oe,i as Me,m as Ee}from"https://app.framerstatic.com/chunk-YBLHVVPR.mjs";import{a as Ie,b as X,i as Pe,l as Se}from"https://app.framerstatic.com/chunk-ZQUNXESX.mjs";import{Wd as Ce,a as Q,b as W}from"https://app.framerstatic.com/chunk-T3QWMIW2.mjs";import{l as ge,u as be,z as he}from"https://app.framerstatic.com/chunk-QQLWBJFN.mjs";import{a as w}from"https://app.framerstatic.com/chunk-WNSBRACC.mjs";import{e as P}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";function Ze(e){let t=[],o=new Set,n=e.get(e.root.homePageNodeId);n&&t.push(n);let i=Ve(e,{shouldAssert:!0});for(let a of i.walk()){if(!Le(a)||!a.webPageId||o.has(a.webPageId))continue;let l=e.get(a.webPageId);l&&(o.add(a.webPageId),t.push(l))}return t}var qe=P(Q());var Rt=be("usePreloadedScope");function et(e){let t=q();qe.default.useEffect(()=>{if(!X(e))return;let o=t.tree.get(e);!De(o)||o.isLoaded()||(Rt.debug("Loading scope node",e),o.load())},[e])}function To(e,t,o){let n=q(),i=p(e)?e.webPageId:null;return et(i),Je(["Tree"],()=>Nt(n.tree,e,t,o,n.stores.scopeStore.active),[e,t,o,n.stores.scopeStore.active],!0)}function Vt(e){let t={};for(let o in e){let n=e[o];ve(n)||X(n)||ee(n)&&Wt(n)&&(t[o]=!0)}return t}function Nt(e,t,o,n,i){let a=Ze(e),l={},c=[],s=[];for(let m of a)l[m.id]=m,m.dataIdentifier&&ne(e,m,o)&&s.push(m),c.push(m);let r=p(t)?l[t.webPageId]:void 0,d=p(t)&&!r,g=O(e,r),u=g?we(g):[],b=u.every(m=>o?.has(m)),v;return n&&n!==V&&(v=e.root.getNonDefaultLocale(n)?.slug),{warnings:p(t)&&t.pathVariables?Vt(t.pathVariables):void 0,targetWebPagePathVariables:u,link:Z(t)?t:void 0,selectedWebPageId:r?.id,selectedPageMissing:d,collectionItemVariableInScope:b,pageLinkOptions:c,collectionWithPathVariableInScopeOptions:s,scrollTargetOptions:r?wt(e,i,r.id)?.nodes:void 0,webPageDataIdentifier:r?.dataIdentifier,localeSlug:v,localeId:n}}function wt(e,t,o){let n=new Set;if(!o)return;let i=e.get(o)?.loaded;if(!i)return;let a=e.getScopeNodeFor(t),c=J(a)&&a.abTestingParentId===o?a:i;for(let d of c.walk())xe(d)&&n.add(d);let s=[],r=new Set;for(let d of n)s.push(d),r.add(d.id);return{nodes:s,ids:r}}function Wt({identifier:e,collectionItemId:t,key:o,value:n}){let i=G.dataForIdentifier(e);if(!i)return!1;let a=Ne(void 0,i,V,t);return!a||i.annotations?.framerSlug!==o?!1:n!==a}function ie(e,t,o){return e.replace(Te,(n,i)=>i===t.id?o.slug:`:${t.name.toLowerCase()}`)}function tt(e,t,o,n="Home",i){let a=p(t)&&!i?Qe(t):void 0,l=p(t)?Xe(e,t):null;if(!t||!Z(t)||!l)return;let c="";if(o&&o!==V){let r=e.root.getNonDefaultLocale(o);r?.slug&&(c="/"+r.slug)}if(l.id===e.root.homePageNodeId)return c?c+"/":n;let s=O(e,l);if(s){if(a?.identifier){let r=F(e,a.identifier);if(r){let d=_(e,o),u=j(r,d)[a.collectionItemId];if(u){let b=r.variables.find(B);if(b){let v={id:a.collectionItemId,slug:u};return c+ie(s,b,v)}}}return}if(J(l)&&l.dataIdentifier){let r=F(e,l.dataIdentifier);if(r&&!a){let d=_(e,o),g=j(r,d),u=r.variables.find(B);if(u)return c+te(s,g,u)}}return c+s}}var h=P(Q());var ue=P(Q());var A=P(Q());var ot="tooltip_tzsvjdc",nt="tooltipTitle_t1ehb6cn";var f=P(W()),Mt=A.default.createContext(void 0);function it({delay:e,direction:t,interactive:o=!0,icon:n,className:i,initialVisibility:a,...l}){let c=A.default.useRef(null),s=A.default.useContext(Mt),{triggerProps:r,tooltipProps:d}=Ke({className:ot,direction:t,interactive:o,offset:5,triggerRef:c,offsetXRef:s,delay:e,initialVisibility:a});return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(je,{...r,className:i,ref:c,children:n}),(0,f.jsx)(Et,{...l,...d})]})}function Et(e){return A.default.useEffect(()=>{if(e.image){let t=new Image;t.src=e.image,t.alt=e.title,t.decode?.().catch(ge)}},[e.image,e.title]),(0,f.jsx)(ze,{...e,tint:e.tint??Oe.panelBackground,children:(0,f.jsxs)(Ae,{gap:Me.panelPadding,direction:"column",children:[e.image&&(0,f.jsx)("div",{children:(0,f.jsx)("img",{src:e.image,alt:e.title,width:"100%",style:{borderRadius:5,marginBottom:5,aspectRatio:"1.75"},decoding:"async"})}),e.title&&(0,f.jsx)(de,{className:nt,style:{fontWeight:Ee.weight.heading},children:(0,f.jsx)(ce,{children:e.title})}),(0,f.jsx)("div",{children:(0,f.jsx)(de,{children:(0,f.jsx)(ce,{children:e.text})})}),e.actions]})})}var me=12,rt="tooltipIcon_t1vnemam",at="inputWithError_ijpnope",lt="clearButton_c6pgvh1";var re=P(W()),ct=ue.default.memo(e=>{let{selectedCollectionItemId:t,selectedCollectionItemSlugIsOutdated:o,selectedLink:n,webPageDataIdentifier:i,onChange:a}=e,l=He(),c=ue.default.useRef(null),s=Ft(o,n,i,t,a,l);return s?(0,re.jsx)(it,{...s,direction:"right",delay:"long",className:rt,icon:(0,re.jsx)(_e,{style:{width:me,height:me},ref:c})}):null});function Bt(e,t,o,n){let i=G.dataForIdentifier(t);w(i,"Data should exist");let a=$e(void 0,i,o)??Ge(void 0,i);if(!a)return;let l=i.annotations?.framerSlug;w(Ce(l),"Collection must have a slug key annotation");let c={identifier:i.identifier,collectionItemId:o,key:l,value:a.slug};n({...e,pathVariables:{...e.pathVariables,[l]:c}},!0)}function Ft(e,t,o,n,i,a){if(e&&p(t)&&o&&n)return{title:"Link Error",text:"The linked path is outdated.",actions:(0,re.jsx)(oe,{variant:"primary",enabled:!a,onClick:()=>Bt(t,o,n,i),children:"Update Link"}),interactive:!0}}var T=P(W()),_t={x:0,y:10};function jt(e,t){if(!t||t.length===0)return;w(t.length<=1,"WebPages only support a single path variable at this time.");let o=t[0];if(!o)return;let n=e.pathVariables?.[o];if(ee(n))return n.collectionItemId}var At=/\W+/;function Ht(e){return new Set(e.split(At))}var xn=({id:e,tree:t,link:o,onChange:n,constantChange:i,supportsPageLinks:a,hideSlugValues:l,supportsVariables:c,pageLinkInfo:s,variableInfo:r,autoFocus:d,className:g,enabled:u,readOnly:b,tabIndex:v,onMouseDown:m,hideErrorTooltip:H=!1,homePageName:L="Home",onClear:N,menuOffset:I=_t,menuWidth:C,menuClassName:y,onOpenChange:S,backdropEnabled:k,linkListStickySectionHeaders:R})=>{let{pageLinkOptions:U,collectionWithPathVariableInScopeOptions:fe,warnings:ut,selectedPageMissing:ft,webPageDataIdentifier:pt,targetWebPagePathVariables:K}=s,pe=!!(K&&K.length>0&&K.some(x=>!!ut?.[x])),z=pe||ft,gt=Re(o)?o.url:"",M=tt(t,o,s.localeId,L,l)??(z?"":gt),[le,bt]=(0,h.useState)(()=>mt(M)),Y=t.root.homePageNodeId,E=(0,h.useMemo)(()=>dt({tree:t,pageLinkInfo:s,webPages:U,homePageId:Y,homePageName:L,variableInfo:r,collectionPageType:l?"noSlugInScope":"showSlugValues"}),[t,s,U,Y,L,r,l]),$=(0,h.useMemo)(()=>dt({tree:t,pageLinkInfo:s,webPages:fe,homePageId:Y,variableInfo:r,homePageName:L,collectionPageType:"slugInScope"}),[t,s,fe,Y,r,L]),ht=(0,h.useCallback)((x,se)=>{if(se||i){if(x===M)return;let kt=E.get(x)??$.get(x)??D({url:x});if(n(kt,se),se)return}let Ct=mt(x);bt(Ct)},[i,M,E,$,n]),It=(0,h.useMemo)(()=>Yt(E,$,le),[E,$,le]),Pt=E.get(M),St=!!r?.idOfMutableVariableProvider,Tt=c&&St,vt=(0,h.useContext)(Ye)===null,[yt]=(0,h.useState)(()=>(Se(o)||Pe(o)||ke(o))&&!Tt&&vt),Lt=p(s.link)?jt(s.link,K):void 0;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(Ue,{id:e,clearSelectionOnEmptySearch:!0,autoCompleteEnabled:a,showAllWhenOpened:p(o),tabIndex:v,onMouseDown:m,searchItemValue:!!le,items:It,value:M,placeholder:Ut(o,z,a),constantChange:!0,onChange:ht,autoFocus:Ie(d)?d:yt,menuOffset:I,enabled:u,readOnly:b,getSearchTokens:Ht,className:Be(z&&at),wrapperClassName:g,rightSlot:N?(0,T.jsx)(oe,{variant:"clean",type:"button",className:lt,onClick:N,title:"Remove Link",children:(0,T.jsx)(Fe,{})}):void 0,onOpenChange:S,backdropEnabled:k,menuWidth:C,menuClassName:y,stickySectionHeaders:R,containOverscroll:!0}),z&&!H&&(0,T.jsx)(ct,{selectedCollectionItemId:Lt,selectedCollectionItemSlugIsOutdated:pe,selectedLink:Pt,webPageDataIdentifier:pt,onChange:n})]})};function Ut(e,t,o){return t?"Missing":he(e)?"Multiple\u2026":o?"Page or URL\u2026":"URL\u2026"}function ae(e,t,o,n=!1){n?o.unshift([t,e]):o.push([t,e])}function Kt(e,t){if(e.variableSourceIdentifiers)for(let o in e.variableSourceIdentifiers){if(e.variableSourceIdentifiers[o]===t)return o;for(let n of e.combined.get(o)||[])if(n.type==="collectionreference"&&n.dataIdentifier===t)return o}}function dt({tree:e,pageLinkInfo:t,webPages:o,homePageId:n,variableInfo:i,homePageName:a,collectionPageType:l}){let c=[],s=t.localeSlug?`/${t.localeSlug}`:"";return o.forEach(r=>{let d=n===r.id,g=d&&!s?a:O(e,r);if(!g)return c;if(r.dataIdentifier){let u=F(e,r.dataIdentifier);if(!u)return;let b=u.variables.find(B);if(!b)return;let v=t.localeId??V,m=b.id,H=m;if(i&&!i.ids.has(m)){for(let I of i.ids)if(We(I,m)){H=I;break}}let L=_(e,v),N=j(u,L);if(l==="slugInScope"||l==="noSlugInScope"){let I=!!(i&&ne(e,r,i.ids)),C=te(g,N,b);if(l==="slugInScope"&&I){w(i,"variableInfo should exist when inScope");let y=Kt(i,r.dataIdentifier),S=y?e.get(y):void 0,k=S?{[m]:ye(H,S.originalid??S.id)}:void 0,R=D({webPageId:r.id,pathVariables:k});ae(R,s+C,c)}else if(l==="noSlugInScope"&&!I){let y=Object.entries(N)[0];if(!y)return c;let[S,k]=y,R={identifier:r.dataIdentifier,collectionItemId:S,key:m,value:k},U=D({webPageId:r.id,pathVariables:{[m]:R}});ae(U,s+C,c)}return c}for(let[I,C]of Object.entries(N)){let S=ie(g,b,{id:I,slug:C}),k={identifier:r.dataIdentifier,collectionItemId:I,key:m,value:C},R=D({webPageId:r.id,pathVariables:{[m]:k}});ae(R,s+S,c,d)}}else{let u=D({webPageId:r.id});ae(u,s+g,c,d)}}),new Map(c)}function mt(e){let t=e.trim(),o=t.indexOf("/:");o!==-1&&(t=t.substring(o));let n=t.split("/").filter(Boolean);for(;n.length>0;){let i=n.join("/")+"/",a="/"+i;if(t.startsWith(a)||t.startsWith(i))return a;n.pop()}return null}var zt=/\/$/u;function Yt(e,t,o){let n=[],i=Array.from(e.keys()),a=Array.from(t.keys());if(o){let l=[];[...a,...i].forEach(r=>{if(!r.startsWith(o))return;let d=r.replace(o,".../");l.push({type:"option",value:r,title:d})});let s=o.replace(zt,"");return n.push({type:"section",value:s,title:s,items:l}),n}return a.length>0&&n.push({type:"section",value:"CMS",items:a.map(l=>({type:"option",value:l}))}),i.length>0&&n.push({type:"section",value:"Pages",items:i.map(l=>({type:"option",value:l}))}),n}export{Mt as a,it as b,Et as c,Ze as d,et as e,To as f,Nt as g,wt as h,tt as i,xn as j};
//# sourceMappingURL=https://app.framerstatic.com/chunk-YYWSLANC.mjs.map
