import{a as xl}from"https://app.framerstatic.com/chunk-AMLGMNDM.mjs";import"https://app.framerstatic.com/chunk-7OX3IHQ3.mjs";import{a as Qe}from"https://app.framerstatic.com/chunk-4W3EVVD5.mjs";import{a as hl}from"https://app.framerstatic.com/chunk-UDNZJVLU.mjs";import{a as Ho,b as Cl,c as wl}from"https://app.framerstatic.com/chunk-BZQZ5SO4.mjs";import"https://app.framerstatic.com/chunk-OXB5C7UX.mjs";import"https://app.framerstatic.com/chunk-UJRF3YV2.mjs";import{B as Xo,Cc as Hn,Dc as $s,Jc as so,Lc as Jn,Nc as el,Ob as Vs,Oc as tl,Sb as zs,Sc as ol,Ta as Bs,Tb as jn,Tc as Wt,Ub as Ws,Vb as qs,Vc as nl,Wb as Ls,Xa as Ts,Xb as Yn,_c as rl,a as zo,b as ws,c as xs,cd as il,dd as al,e as Us,ed as sl,g as Is,gc as Ks,gd as ll,h as bs,hc as Xs,hd as cl,ic as Zs,id as dl,kb as As,kc as js,lc as Ys,ld as fl,m as Wo,mc as Hs,md as ml,n as Fs,nd as jo,o as qo,od as Yo,pb as Rs,q as Lo,r as Ko,rd as z,s as Ss,sb as Ds,td as pl,u as vs,ud as ul,va as Xn,w as Ps,wd as gl,x as Es,xd as yl,y as Ns,ya as Zn,yc as Js,zc as Qs}from"https://app.framerstatic.com/chunk-ADDIR34Y.mjs";import"https://app.framerstatic.com/chunk-IMXM23T4.mjs";import"https://app.framerstatic.com/chunk-XBQR3TLW.mjs";import"https://app.framerstatic.com/chunk-YYWSLANC.mjs";import{h as Cs}from"https://app.framerstatic.com/chunk-DKEXDDQW.mjs";import{a as Je}from"https://app.framerstatic.com/chunk-LN3Q5ZVO.mjs";import"https://app.framerstatic.com/chunk-KCILMCSM.mjs";import{D as ss}from"https://app.framerstatic.com/chunk-2GEEBXEF.mjs";import"https://app.framerstatic.com/chunk-ENVN7SZK.mjs";import"https://app.framerstatic.com/chunk-IHOAENGB.mjs";import{A as Gt,Aa as os,C as G,E as Va,F as qa,G as La,H as Do,I as Mo,J as Ka,K as Xa,L as Za,M as Vt,O as _o,P as Go,Y as Ya,ea as Ha,pa as Ja,ub as rs,vb as cs,xa as ts,ya as Vo,z as _t}from"https://app.framerstatic.com/chunk-UIOBUWOL.mjs";import{a as es,b as is,c as as,d as ls,g as ds,k as fs}from"https://app.framerstatic.com/chunk-ELHX4CJ5.mjs";import{Hd as Ga,Xa as Ba,Za as Aa,cb as Ra,da as Ea,ga as b,ha as ka,id as _a,mb as Da,wf as ja}from"https://app.framerstatic.com/chunk-K34SIOE2.mjs";import"https://app.framerstatic.com/chunk-DXGLR7XE.mjs";import{a as Na}from"https://app.framerstatic.com/chunk-ALMIM4K3.mjs";import{j as Ma}from"https://app.framerstatic.com/chunk-PSALBDCX.mjs";import"https://app.framerstatic.com/chunk-BQK5PZHM.mjs";import"https://app.framerstatic.com/chunk-GTCJ5LLN.mjs";import"https://app.framerstatic.com/chunk-JRBFLTNY.mjs";import"https://app.framerstatic.com/chunk-N57XNHE3.mjs";import"https://app.framerstatic.com/chunk-TB2SOEAF.mjs";import"https://app.framerstatic.com/chunk-UTK4JR6V.mjs";import"https://app.framerstatic.com/chunk-SE354WOV.mjs";import{i as za,j as Wa}from"https://app.framerstatic.com/chunk-JB3A7NVR.mjs";import"https://app.framerstatic.com/chunk-HTH46QE2.mjs";import"https://app.framerstatic.com/chunk-CPERHYZU.mjs";import"https://app.framerstatic.com/chunk-5ARAOZY2.mjs";import"https://app.framerstatic.com/chunk-AR73BNYO.mjs";import"https://app.framerstatic.com/chunk-WAFDZ45U.mjs";import"https://app.framerstatic.com/chunk-FRPUTYCB.mjs";import"https://app.framerstatic.com/chunk-IF6XHWOH.mjs";import"https://app.framerstatic.com/chunk-YE25YANI.mjs";import"https://app.framerstatic.com/chunk-LIQKYMTW.mjs";import"https://app.framerstatic.com/chunk-ITI57EX2.mjs";import{a as zt}from"https://app.framerstatic.com/chunk-JHA7CKO2.mjs";import"https://app.framerstatic.com/chunk-EWEZCJKH.mjs";import"https://app.framerstatic.com/chunk-Q4ZQNAWB.mjs";import{a as hs}from"https://app.framerstatic.com/chunk-RWT33AJE.mjs";import{a as Oa,b as st}from"https://app.framerstatic.com/chunk-ZWQYHZGP.mjs";import{b as Os}from"https://app.framerstatic.com/chunk-SFFFLSCY.mjs";import"https://app.framerstatic.com/chunk-DFOUBDO5.mjs";import"https://app.framerstatic.com/chunk-D7MEQ7Y3.mjs";import{i as Pa}from"https://app.framerstatic.com/chunk-GFDNSHBH.mjs";import"https://app.framerstatic.com/chunk-TVZZ4XBH.mjs";import"https://app.framerstatic.com/chunk-YS3B4HMG.mjs";import{a as _s,d as Gs}from"https://app.framerstatic.com/chunk-VR4MUA3S.mjs";import"https://app.framerstatic.com/chunk-UGATCWJQ.mjs";import"https://app.framerstatic.com/chunk-SXPCJYOO.mjs";import"https://app.framerstatic.com/chunk-QFF2HNPA.mjs";import"https://app.framerstatic.com/chunk-JTAQPVOP.mjs";import"https://app.framerstatic.com/chunk-VYTIKJDZ.mjs";import{a as ks}from"https://app.framerstatic.com/chunk-E57LT3WC.mjs";import{a as ys}from"https://app.framerstatic.com/chunk-3IFUK53I.mjs";import{b as $a,r as ns}from"https://app.framerstatic.com/chunk-ZBJMNAKD.mjs";import{e as yt,f as Qa}from"https://app.framerstatic.com/chunk-LRCH44M6.mjs";import{a as Ta,j as se}from"https://app.framerstatic.com/chunk-2BBEOARH.mjs";import"https://app.framerstatic.com/chunk-PABHF7FN.mjs";import"https://app.framerstatic.com/chunk-5RPZUZJP.mjs";import{Ed as Ln,Fd as Kn,Ia as To,Jg as ea,Pb as zi,Wc as Li,Wd as ji,Xd as Yi,Yb as Wi,Yd as Hi,Zd as Ji,ja as qn,od as Xi,pd as Zi,ug as Qi,vg as $i,wc as qi}from"https://app.framerstatic.com/chunk-GVEIL7AP.mjs";import"https://app.framerstatic.com/chunk-HQZYWAIC.mjs";import{a as lt}from"https://app.framerstatic.com/chunk-7GSEC7H4.mjs";import{e as Ki,f as Me}from"https://app.framerstatic.com/chunk-TQ6SMIXL.mjs";import"https://app.framerstatic.com/chunk-Y4KSD2WZ.mjs";import"https://app.framerstatic.com/chunk-TRAY75NE.mjs";import"https://app.framerstatic.com/chunk-2YJ3ADBJ.mjs";import{b as Ms}from"https://app.framerstatic.com/chunk-J24HDNU5.mjs";import"https://app.framerstatic.com/chunk-MK7ULH4H.mjs";import{$e as Ao,Af as wa,Bf as xa,Ee as K,Ff as Rt,Gf as Dt,Hf as Mt,Ig as va,J as aa,Jf as Ro,Ke as He,Nc as da,Oe as pa,Re as ua,S as sa,Te as ga,Tf as Ua,b as na,df as ya,ef as ha,fb as la,h as ra,hf as Ca,l as ia,nb as ca,ng as Ia,og as ba,qe as fa,sg as Fa,tg as Sa,xe as ma,ye as he}from"https://app.framerstatic.com/chunk-SJWII7XM.mjs";import{a as Zo}from"https://app.framerstatic.com/chunk-4T3PEC2R.mjs";import"https://app.framerstatic.com/chunk-3MTXVS5U.mjs";import"https://app.framerstatic.com/chunk-VRLR7CB2.mjs";import"https://app.framerstatic.com/chunk-QKG7LG2J.mjs";import{a as ps}from"https://app.framerstatic.com/chunk-3FKDVKKA.mjs";import{a as Y}from"https://app.framerstatic.com/chunk-QFU6OGL3.mjs";import{a as ms,b as us,c as gs}from"https://app.framerstatic.com/chunk-CTKJD4ES.mjs";import"https://app.framerstatic.com/chunk-7I74MBRW.mjs";import{Oe as Bo,mc as be,pd as Vi,ub as _i}from"https://app.framerstatic.com/chunk-JQGQBMDT.mjs";import{$b as D,Ar as Oo,B as je,Be as bi,Cd as k,Ce as Fi,Dd as Pe,Gc as wi,Gd as Tt,Hd as Ye,Hi as _n,I as Ae,Ic as Uo,Kc as De,Km as Ni,Mk as Gn,Nl as Fo,Oc as Io,Pl as gt,Rv as Gi,Tn as Oi,Tp as Ri,Tq as Di,Ul as So,Un as Bi,Yb as yi,Yk as bo,Zb as hi,_b as Ci,_c as xi,_k as Pi,ai as Si,ev as At,fb as pi,ga as ve,gs as ao,hb as ui,hr as at,ir as Mi,jr as vo,ki as vi,l as te,lr as Po,nm as Ei,np as Ti,on as ki,op as _,qd as Ui,sd as Mn,sq as Vn,vq as zn,wd as Ii,wv as Wn,xb as gi,xr as Eo,yr as No,zr as ko}from"https://app.framerstatic.com/chunk-HOZEDTF7.mjs";import"https://app.framerstatic.com/chunk-VXJAAVJQ.mjs";import"https://app.framerstatic.com/chunk-KD4H3DLZ.mjs";import{e as Ai}from"https://app.framerstatic.com/chunk-MWPDEC7Y.mjs";import"https://app.framerstatic.com/chunk-4DUBS6C5.mjs";import"https://app.framerstatic.com/chunk-R42SKB5P.mjs";import"https://app.framerstatic.com/chunk-XFC6OVIX.mjs";import{p as nt}from"https://app.framerstatic.com/chunk-65SNUELI.mjs";import"https://app.framerstatic.com/chunk-XFC6OVIX.mjs";import"https://app.framerstatic.com/chunk-LH43QRIB.mjs";import{a as V,b as ri}from"https://app.framerstatic.com/chunk-4AQCMAAQ.mjs";import"https://app.framerstatic.com/chunk-FNEHAGV6.mjs";import"https://app.framerstatic.com/chunk-MGFLWLOD.mjs";import"https://app.framerstatic.com/chunk-V5IJFYMI.mjs";import{c as ii}from"https://app.framerstatic.com/chunk-QGRQ6OP4.mjs";import"https://app.framerstatic.com/chunk-POQKH4YA.mjs";import{e as ta,g as oa,i as ae}from"https://app.framerstatic.com/chunk-YBLHVVPR.mjs";import"https://app.framerstatic.com/chunk-AUNF3KWQ.mjs";import{k as ai,t as si,u as li}from"https://app.framerstatic.com/chunk-VYQ6DBUD.mjs";import{p as it,r as Bt}from"https://app.framerstatic.com/chunk-BMR3NPHE.mjs";import{b as ce,d as di,e as rt,f as xo,i as de,m as fi,o as mi}from"https://app.framerstatic.com/chunk-ZQUNXESX.mjs";import{_c as Re,a as $,b as x,zc as ci}from"https://app.framerstatic.com/chunk-T3QWMIW2.mjs";import"https://app.framerstatic.com/chunk-YSPPHHKT.mjs";import{b as ni}from"https://app.framerstatic.com/chunk-YH364MAV.mjs";import"https://app.framerstatic.com/chunk-N2ANBFPI.mjs";import{D as oi,ba as io,ca as Ot,i as ho,l as ie,p as Co}from"https://app.framerstatic.com/chunk-QQLWBJFN.mjs";import{a as u,b as ro}from"https://app.framerstatic.com/chunk-WNSBRACC.mjs";import{a as wo}from"https://app.framerstatic.com/chunk-LQILWJHN.mjs";import{e as h,f as ne,g as re,h as I,i as B,j as w,k as kt,l as T,m as yo}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";var Il=h(x()),Nf={BooleanControlPropRow:Ho,EnumControlPropRow:Js,StringControlPropRow:so};function Ul({children:n}){return(0,Il.jsx)(Rs.Provider,{value:Nf,children:n})}var bl;(function(n){n[n.None=0]="None",n[n.Mutable=1]="Mutable",n[n.Watching=2]="Watching",n[n.RecursedCheck=4]="RecursedCheck",n[n.Recursed=8]="Recursed",n[n.Dirty=16]="Dirty",n[n.Pending=32]="Pending"})(bl||(bl={}));function Fl({update:n,notify:o,unwatched:e}){let t=0;return{link:r,unlink:i,propagate:a,checkDirty:f,endTracking:l,startTracking:c,shallowPropagate:p};function r(d,s){let g=s.depsTail;if(g!==void 0&&g.dep===d)return;let y;if(s.flags&4&&(y=g!==void 0?g.nextDep:s.deps,y!==void 0&&y.dep===d)){y.version=t,s.depsTail=y;return}let C=d.subsTail;if(C!==void 0&&C.version===t&&C.sub===s)return;let S=s.depsTail=d.subsTail={version:t,dep:d,sub:s,prevDep:g,nextDep:y,prevSub:C,nextSub:void 0};y!==void 0&&(y.prevDep=S),g!==void 0?g.nextDep=S:s.deps=S,C!==void 0?C.nextSub=S:d.subs=S}function i(d,s=d.sub){let g=d.dep,y=d.prevDep,C=d.nextDep,S=d.nextSub,v=d.prevSub;return C!==void 0?C.prevDep=y:s.depsTail=y,y!==void 0?y.nextDep=C:s.deps=C,S!==void 0?S.prevSub=v:g.subsTail=v,v!==void 0?v.nextSub=S:(g.subs=S)===void 0&&e(g),C}function a(d){let s=d.nextSub,g;e:do{let y=d.sub,C=y.flags;if(C&3&&(C&60?C&12?C&4?!(C&48)&&m(d,y)?(y.flags=C|40,C&=1):C=0:y.flags=C&-9|32:C=0:y.flags=C|32,C&2&&o(y),C&1)){let S=y.subs;if(S!==void 0){d=S,S.nextSub!==void 0&&(g={value:s,prev:g},s=d.nextSub);continue}}if((d=s)!==void 0){s=d.nextSub;continue}for(;g!==void 0;)if(d=g.value,g=g.prev,d!==void 0){s=d.nextSub;continue e}break}while(!0)}function c(d){++t,d.depsTail=void 0,d.flags=d.flags&-57|4}function l(d){let s=d.depsTail,g=s!==void 0?s.nextDep:d.deps;for(;g!==void 0;)g=i(g,d);d.flags&=-5}function f(d,s){let g,y=0;e:do{let C=d.dep,S=C.flags,v=!1;if(s.flags&16)v=!0;else if((S&17)===17){if(n(C)){let U=C.subs;U.nextSub!==void 0&&p(U),v=!0}}else if((S&33)===33){(d.nextSub!==void 0||d.prevSub!==void 0)&&(g={value:d,prev:g}),d=C.deps,s=C,++y;continue}if(!v&&d.nextDep!==void 0){d=d.nextDep;continue}for(;y;){--y;let U=s.subs,F=U.nextSub!==void 0;if(F?(d=g.value,g=g.prev):d=U,v){if(n(s)){F&&p(U),s=d.sub;continue}}else s.flags&=-33;if(s=d.sub,d.nextDep!==void 0){d=d.nextDep;continue e}v=!1}return v}while(!0)}function p(d){do{let s=d.sub,g=d.nextSub,y=s.flags;(y&48)===32&&(s.flags=y|16,y&2&&o(s)),d=g}while(d!==void 0)}function m(d,s){let g=s.depsTail;if(g!==void 0){let y=s.deps;do{if(y===d)return!0;if(y===g)break;y=y.nextDep}while(y!==void 0)}return!1}}var Qn=[],{link:lo,unlink:$n,propagate:kf,checkDirty:Sl,endTracking:vl,startTracking:Pl,shallowPropagate:El}=Fl({update(n){return"getter"in n?Tl(n):Al(n,n.value)},notify:Rl,unwatched(n){if("getter"in n){let o=n.deps;if(o!==void 0){n.flags=17;do o=$n(o,n);while(o!==void 0)}}else"previousValue"in n||_l.call(n)}}),tr=0,Jo=0,er=0,ct,Qo;function qt(n){let o=ct;return ct=n,o}function Nl(){++tr}function kl(){--tr||Ml()}function Ol(n){return Bf.bind({previousValue:n,value:n,subs:void 0,subsTail:void 0,flags:1})}function or(n){return Of.bind({value:void 0,subs:void 0,subsTail:void 0,deps:void 0,depsTail:void 0,flags:17,getter:n})}function Bl(n){let o={fn:n,subs:void 0,subsTail:void 0,deps:void 0,depsTail:void 0,flags:2};ct!==void 0?lo(o,ct):Qo!==void 0&&lo(o,Qo);let e=qt(o);try{o.fn()}finally{qt(e)}return _l.bind(o)}function Tl(n){let o=qt(n);Pl(n);try{let e=n.value;return e!==(n.value=n.getter(e))}finally{qt(o),vl(n)}}function Al(n,o){return n.flags=1,n.previousValue!==(n.previousValue=o)}function Rl(n){let o=n.flags;if(!(o&64)){n.flags=o|64;let e=n.subs;e!==void 0?Rl(e.sub):Qn[er++]=n}}function Dl(n,o){if(o&16||o&32&&Sl(n.deps,n)){let t=qt(n);Pl(n);try{n.fn()}finally{qt(t),vl(n)}return}else o&32&&(n.flags=o&-33);let e=n.deps;for(;e!==void 0;){let t=e.dep,r=t.flags;r&64&&Dl(t,t.flags=r&-65),e=e.nextDep}}function Ml(){for(;Jo<er;){let n=Qn[Jo];Qn[Jo++]=void 0,Dl(n,n.flags&=-65)}Jo=0,er=0}function Of(){let n=this.flags;if(n&16||n&32&&Sl(this.deps,this)){if(Tl(this)){let o=this.subs;o!==void 0&&El(o)}}else n&32&&(this.flags=n&-33);return ct!==void 0?lo(this,ct):Qo!==void 0&&lo(this,Qo),this.value}function Bf(...n){if(n.length){let o=n[0];if(this.value!==(this.value=o)){this.flags=17;let e=this.subs;e!==void 0&&(kf(e),tr||Ml())}}else{let o=this.value;if(this.flags&16&&Al(this,o)){let e=this.subs;e!==void 0&&El(e)}return ct!==void 0&&lo(this,ct),o}}function _l(){let n=this.deps;for(;n!==void 0;)n=$n(n,this);let o=this.subs;o!==void 0&&$n(o),this.flags=0}var $o=h($());function M(n=Object.is){return(o,e)=>{let t=new WeakMap;return{get(){let r=t.get(this);return u(r,"Signal must exist"),r()},set(r){let i=t.get(this);u(i,"Signal must exist");let a=i();if(!n(a,r))return this.scheduler.signalChanges(this),i(r)},init(r){let i=Ol(r);t.set(this,i)}}}}function ht(n=Object.is){return(o,e)=>{let t=new WeakMap;return function(){let r=t.get(this);if(r)return r();let i=or(a=>{let c=o.call(this);return de(a)?c:n(a,c)?a:c});return t.set(this,i),i()}}}function E(n,o,e=Object.is){let t=(0,$o.useMemo)(()=>{let r=or(i=>{let a=n();return de(i)?a:e(i,a)?i:a});return{subscribe(i){return Bl(()=>{r(),i()})},getSnapshot(){return r()}}},[...o,e]);return(0,$o.useSyncExternalStore)(t.subscribe,t.getSnapshot)}function Gl(){Nl()}function Vl(){kl()}var nr="data-chrome";function zl(n){return n instanceof HTMLElement?n.closest(`[${nr}]`)!==null:!1}var rr="data-floating-canvas-chrome";function Wl(n){return n instanceof Element?n.closest(`[${rr}]`)!==null:!1}function ql(){return window}function ir(){return ql().secureFrameAncestors}function Lt(){V(ir(),"Must have secure frame ancestors.")}var yn=h($());var Ll="chromeHidden_c1gxt05z",Kl="nonHudChromeWrapper_n1sd5akc";var Ct=h($());var ar=h(x());function Xl({collectionItemNode:n,collectionNode:o,controlProp:e,variableId:t,warningMessage:r,onChange:i}){let a=_(),l=o.getPropertyControls(a.tree)[t];return V(l?.type==="boolean"),(0,ar.jsx)(z,{title:l.title??"",warningMessage:r,children:(0,ar.jsx)(nl,{control:l,controlProp:e,fieldId:t,itemId:n.id,onChange:f=>{se(f)&&i(t,f)}})})}var Zl="onPageCMSFieldsModal_o1kosemn",jl="onPageCMSFieldsModalHeader_o1tcokht",Yl="onPageCMSFieldsModalBody_o11jr4ka",Af=1,Hl=ae.panelPadding+Af,Jl="onPageCMSFieldsModalButtonContainer_oaqx903",en="button_b1gqim6f";var Ql="wrapper_wje69dc",$l="input_i1rqgchl",ec="icon_ixghur2",tc="collectionInputHeight_c1d0unc6";var sr=h(x());function oc({collectionNode:n,controlProp:o,variableId:e,warningMessage:t,onChange:r}){let i=_(),c=n.getPropertyControls(i.tree)[e];V(c?.type==="collectionreference");let l=Oi(c,o);V(!D(l),"Variables are not supported");let f=c.dataIdentifier;function p(m){r(e,{type:"collectionreference",value:m})}return(0,sr.jsx)(z,{title:c.title??"",warningMessage:t,children:(0,sr.jsx)(Vs,{large:!0,value:l,onChange:p,className:$l,dataIdentifier:f,wrapperClassName:pi(Ql,tc),iconClassName:ec})})}var lr=h(x());function nc({collectionItemNode:n,collectionNode:o,controlProp:e,variableId:t,warningMessage:r,onChange:i}){let a=_(),l=o.getPropertyControls(a.tree)[t];return V(l?.type==="color"),(0,lr.jsx)(z,{title:l.title??"",warningMessage:r,children:(0,lr.jsx)(il,{control:l,controlProp:e,fieldId:t,itemId:n.id,onChange:f=>{se(f)&&i(t,f)},ColorPickerPopoutComponent:As})})}var cr=h(x());function rc({collectionItemNode:n,collectionNode:o,controlProp:e,variableId:t,warningMessage:r,onChange:i}){let a=_(),l=o.getPropertyControls(a.tree)[t];return V(l?.type==="date"),(0,cr.jsx)(z,{title:l.title??"",warningMessage:r,children:(0,cr.jsx)(al,{control:l,controlProp:e,fieldId:t,itemId:n.id,onChange:f=>{se(f)&&i(t,f)},required:!1})})}var dr=h(x());function ic({collectionItemNode:n,collectionNode:o,controlProp:e,variableId:t,warningMessage:r,onChange:i}){let a=_(),l=o.getPropertyControls(a.tree)[t];return V(l?.type==="enum"),(0,dr.jsx)(z,{title:l.title??"",warningMessage:r,children:(0,dr.jsx)(sl,{control:l,controlProp:e,fieldId:t,itemId:n.id,onChange:f=>{se(f)&&i(t,f)}})})}var fr=h(x());function ac({collectionItemNode:n,collectionNode:o,controlProp:e,variableId:t,warningMessage:r,onChange:i}){let a=_(),l=o.getPropertyControls(a.tree)[t];if(V(l?.type==="file"),V(!De(e?.value),"Dynamic values are not supported within required field validation"),e&&e?.type!=="file")return null;let p=(e?.value??"").split(".").pop(),m=!p||l.allowedFileTypes.length===0||l.allowedFileTypes.includes(p);return(0,fr.jsx)(z,{title:l.title??"",warningMessage:r,showWarningTint:!m,children:(0,fr.jsx)(ll,{control:l,controlProp:e,fieldId:t,itemId:n.id,onChange:d=>{se(d)&&i(t,d)},reset:()=>{i(t,{type:"file",value:void 0})}})})}var mr=h(x());function sc({collectionItemNode:n,collectionNode:o,controlProp:e,variableId:t,onChange:r}){let i=_(),a=hs(s=>{let g=s(e);g&&r(t,g)}),l=o.getPropertyControls(i.tree)[t];V(l?.type==="array"),V(!e||vi(e));let f=Ss(e,l,!0),p=vs(e,l,!0),d=Ko(f??p,l);return(0,mr.jsx)(z,{title:l.title??"",warningMessage:d,children:(0,mr.jsx)(cl,{collectionId:o.id,control:l,fieldId:t,controlProp:e,itemId:n.id,onChange:a,required:!1})})}var pr=h(x());function lc({collectionItemNode:n,collectionNode:o,controlProp:e,variableId:t,warningMessage:r,onChange:i}){let a=_(),l=o.getPropertyControls(a.tree)[t];return V(l?.type==="responsiveimage"),(0,pr.jsx)(z,{title:l.title??"",warningMessage:r,children:(0,pr.jsx)(dl,{control:l,controlProp:e,fieldId:t,itemId:n.id,onChange:f=>{let p=f(e);se(p)&&i(t,p)},reset:()=>{let f={type:"image",value:void 0};i(t,f)}})})}var ur=h(x());function cc({collectionItemNode:n,collectionNode:o,controlProp:e,variableId:t,warningMessage:r,onChange:i}){let a=_(),l=o.getPropertyControls(a.tree)[t];return V(l?.type==="link"),(0,ur.jsx)(z,{title:l.title??"",warningMessage:r,children:(0,ur.jsx)(fl,{control:l,controlProp:e,fieldId:t,itemId:n.id,onChange:f=>{se(f)&&i(t,f)},reset:()=>{let f={type:"link",value:void 0};i(t,f)}})})}var dc="inputWrapper_i4uywus";var gr=h(x());function fc({collectionNode:n,controlProp:o,variableId:e,warningMessage:t,onChange:r}){let i=_(),c=n.getPropertyControls(i.tree)[e];u(c?.type==="multicollectionreference");let l=c.dataIdentifier,f=Bi(c,o)??[];return u(!D(f),"Variables are not supported"),(0,gr.jsx)(z,{title:c.title??"",warningMessage:t,children:(0,gr.jsx)($s,{large:!0,value:f,onChange:p=>{r(e,{type:"multicollectionreference",value:p})},wrapperClassName:dc,dataIdentifier:l})})}var yr=h(x());function mc({collectionItemNode:n,collectionNode:o,controlProp:e,variableId:t,warningMessage:r,onChange:i}){let a=_(),l=o.getPropertyControls(a.tree)[t];return V(l?.type==="number"),(0,yr.jsx)(z,{title:l.title??"",warningMessage:r,children:(0,yr.jsx)(ml,{control:l,controlProp:e,fieldId:t,itemId:n.id,onChange:f=>{se(f)&&i(t,f)}})})}var tn=h(x()),pc=["left","right","auto-vertical"];function uc({collectionNode:n,collectionItemNode:o,controlProp:e,variableId:t,onChange:r,warningMessage:i}){let a=_(),l=n.getPropertyControls(a.tree)[t];u(l?.type==="richtext");let f=e&&ii(e.value)?e.value:void 0,p=s=>{r(t,{type:l.type,value:s})},m=Zo(()=>at(Po)),d=Bt("pasteMarkdown");return(0,tn.jsx)(z,{title:l.title??"",warningMessage:i,children:d?(0,tn.jsx)(jo,{enabled:!0,schema:m,compactTagSelector:!0,defaultValue:f??"",onChange:p,scopeType:"ContentManagement",onUnsavedChange:lt,popoverAttachmentEdge:pc,fallbackToModalAppearance:!0,saveOnMetaArrowNavigation:!0},o.id):(0,tn.jsx)(Yo,{enabled:!0,supportsEmbeds:!0,supportsMedia:!0,compactTagSelector:!0,defaultValue:f??"",onChange:p,scopeType:"ContentManagement",onUnsavedChange:lt,popoverAttachmentEdge:pc,fallbackToModalAppearance:!0,saveOnMetaArrowNavigation:!0},o.id)})}var on=h(x());function gc({collectionNode:n,collectionItemNode:o,controlProp:e,variableId:t,onChange:r,warningMessage:i}){let a=_(),l=n.getPropertyControls(a.tree)[t];u(l?.type==="string");let f=e&&ce(e.value)?e.value:void 0,p=l.placeholder,m=l.defaultValue??"",d=f??m,s=g=>{r(t,{type:l.type,value:g})};return(0,on.jsx)(z,{title:l.title??"",warningMessage:i,children:l.displayTextArea?(0,on.jsx)(ya,{value:d,onChange:s,constantChange:!0,placeholder:p,minRows:10,maxRows:30,className:ul},o.id):(0,on.jsx)(ha,{type:l.obscured?"password":"text",value:d,onChange:s,placeholder:p,constantChange:!0,className:rl})})}var R=h(x());function hc({fieldIdsToShow:n,requiredFieldsOnly:o,collectionItemId:e,collectionNodeId:t}){let[r,i]=(0,Ct.useState)(!0),[a,c]=(0,Ct.useState)(()=>new Map),l=a.size>0,f=b(),{treeStore:p,projectStore:m,modalStore:d}=f.stores,s=e!==f.stores.canvasStore.temporaryCollectionItemNodeId,g=p.tree.getNodeWithTrait(t,Tt),y=p.tree.getNodeWithTrait(e,Ye);(0,Ct.useEffect)(()=>{(!y||!g||y.parentid!==g.id)&&d.dismiss()},[y,g,d]);let C=o||s,S=()=>{for(let[Q,q]of a)p.tree.current(y)?.setControlProp(Q,q);C?s?(p.tree.current(y)?.set({privateToUserId:void 0}),m.commitTreeAndSend()):f.stores.canvasStore.saveTemporaryCollectionItem():m.commitTreeAndSend(),d.dismissAll()},v=()=>{if(!zo()){if(s&&U.size>0){i(!1);return}S()}},U=Gf({collectionNode:g||void 0,collectionItemNode:y||void 0,tempControlProps:a,fieldIdsToShow:n});function F(Q){let A=g?.getPropertyControls(p.tree)?.[Q];if(!A)return;let Xe=U.get(Q);if(!(Xe?.type==="required"&&!(s&&!r)))return Ko(Xe,A)}let P=(Q,q)=>{u(y,"CollectionItemNode must be present");let A=y.getControlProp(Q);c(Xe=>A?.value===q.value?io.remove(Xe,Q):xo(A?.value)&&xo(q.value)&&fs(A.value,q.value)?io.remove(Xe,Q):yc(A)&&yc(q)?io.remove(Xe,Q):io.set(Xe,Q,q))},N=()=>{if(!l){Ie();return}d.push({type:"Confirmation",title:"Unsaved Changes",description:"Are you sure that you want to discard your new item?",interactionRequired:!0,onConfirm:()=>Ie(),cancelLabel:"Continue Editing",confirmLabel:"Discard Item",dismissVariant:"primary",variant:"destructiveSecondary",cancelOnEnter:!0,confirmOnEnter:!1,source:"on_page_hud",buttonDirection:"column",hasBackdrop:!0})},Ie=()=>{y&&(p.tree.remove(y.id),m.commitTreeAndSend(),d.dismiss())},Ke=()=>{if(s){N();return}if(o){d.dismiss();return}S()},Be=()=>{if(s){N();return}d.dismiss()};return(0,R.jsxs)(Rt,{hasBackdrop:!0,className:Zl,visible:n.length>0,onDismiss:Ke,onConfirm:v,children:[(0,R.jsx)(Dt,{separator:!0,title:s?"New Item":o?"Required Fields":"All Fields",className:jl,children:(0,R.jsx)(Mt,{onDismiss:Be})}),(0,R.jsxs)(va,{className:Yl,children:[(0,R.jsx)(Ua,{size:0}),n.map(Q=>{if(!g||!y)return null;let q=g.getVariable(Q);if(!q)return null;let A=a.get(Q)??y.getControlProp(Q);return(0,R.jsx)(_f,{variable:q,collectionItemNode:y,collectionNode:g,controlProp:A,onChange:P,getWarningMessage:F},Q)})]}),(0,R.jsx)(Ro,{displayDivider:!1,paddingTop:Hl,className:Jl,gap:ae.inputSpacing,children:(0,R.jsxs)(na,{children:[o?(0,R.jsx)(K,{bold:!0,onClick:Be,className:en,children:(0,R.jsx)(He,{children:"Cancel"})}):(0,R.jsx)(K,{bold:!0,onClick:Be,className:en,children:(0,R.jsx)(He,{children:l?"Discard":"Cancel"})}),(0,R.jsx)(K,{bold:!0,type:"submit",variant:"primary",className:en,enabled:o?U.size===0:l,children:(0,R.jsx)(He,{children:"Save"})})]})})]})}function _f({variable:n,collectionItemNode:o,collectionNode:e,controlProp:t,onChange:r,getWarningMessage:i}){let a=n.type;switch(a){case"slug":return gt(n)?(0,R.jsx)(pl,{collectionNode:e,collectionItemNode:o,controlProp:t,onChange:r,variable:n,warningMessage:i(n.id)}):null;case"string":return(0,R.jsx)(gc,{collectionNode:e,collectionItemNode:o,controlProp:t,variableId:n.id,onChange:r,warningMessage:i(n.id)});case"richtext":return(0,R.jsx)(uc,{collectionNode:e,collectionItemNode:o,controlProp:t,variableId:n.id,onChange:r,warningMessage:i(n.id)});case"link":return(0,R.jsx)(cc,{collectionItemNode:o,collectionNode:e,controlProp:t,variableId:n.id,warningMessage:i(n.id),onChange:r});case"image":return(0,R.jsx)(lc,{collectionItemNode:o,collectionNode:e,controlProp:t,variableId:n.id,warningMessage:i(n.id),onChange:r});case"array":return(0,R.jsx)(sc,{collectionItemNode:o,collectionNode:e,controlProp:t,variableId:n.id,onChange:r});case"multicollectionreference":return(0,R.jsx)(fc,{collectionNode:e,controlProp:t,variableId:n.id,warningMessage:i(n.id),onChange:r});case"collectionreference":return(0,R.jsx)(oc,{collectionNode:e,controlProp:t,variableId:n.id,warningMessage:i(n.id),onChange:r});case"file":return(0,R.jsx)(ac,{collectionItemNode:o,collectionNode:e,controlProp:t,variableId:n.id,warningMessage:i(n.id),onChange:r});case"date":return(0,R.jsx)(rc,{collectionItemNode:o,collectionNode:e,controlProp:t,variableId:n.id,warningMessage:i(n.id),onChange:r});case"number":return(0,R.jsx)(mc,{collectionItemNode:o,collectionNode:e,controlProp:t,variableId:n.id,warningMessage:i(n.id),onChange:r});case"boolean":return(0,R.jsx)(Xl,{collectionItemNode:o,collectionNode:e,controlProp:t,variableId:n.id,warningMessage:i(n.id),onChange:r});case"enum":return(0,R.jsx)(ic,{collectionItemNode:o,collectionNode:e,controlProp:t,variableId:n.id,warningMessage:i(n.id),onChange:r});case"color":return(0,R.jsx)(nc,{collectionItemNode:o,collectionNode:e,controlProp:t,variableId:n.id,warningMessage:i(n.id),onChange:r});default:ri(a)}}function Gf({collectionNode:n,collectionItemNode:o,tempControlProps:e,fieldIdsToShow:t}){let r=b(),i=E(()=>r.stores.treeStore.tree,[]),a=Fs(n,o);return(0,Ct.useMemo)(()=>{let c=new Map;if(!n||!o)return c;for(let l of t){let f=n.getVariable(l);if(!f)continue;let m=n.getPropertyControls(i)[l];if(!m)continue;let d=e.get(l)??o.getControlProp(l),s=a.get(l),g;(Fo(f)||gt(f))&&(g=qo(f,n.variables,o));let y=Lo(f.type,m,d,g,void 0,So(f),s);y&&c.set(l,y)}return c},[n,o,t,a,i,e])}function yc(n){return!n||mi(n.value)?!0:ce(n.value)?Ga(n.value):xo(n.value)?n.value.length===0:!1}var rn=h($());var Cc="editorContainer_e1zu74n";var xc=h(x());function wc({initialHtml:n,onContentChange:o,onEscape:e}){let t=(0,rn.useRef)(null);return(0,rn.useEffect)(()=>{let r;async function i(){let{baseKeymap:a,chainCommands:c,dropCursor:l,gapCursor:f,history:p,keymap:m,redo:d,undo:s,undoInputRule:g}=await Vt(),y=it.isOn("pasteMarkdown")?(F,P,N)=>ko(F,P,N):(F,P,N)=>Oo(F,N),C=at(vo),S=y(n,C,{plugins:[p(),m({"Mod-z":c(g,s),"Mod-Shift-z":d,"Shift-Enter":Do(C),"Mod-b":Yn(C.marks.bold),"Mod-i":Yn(C.marks.italic),"Shift-Tab":za(C.nodes.listItem),Tab:c(Wa(C.nodes.listItem),()=>!0),Backspace:c(g,Mo(C)),Escape:()=>(e?.(),!!e)}),m(a),l({color:"var(--framer-color-text)",width:2}),f(),_o()]}),v,U=new Ai(null,{state:S,editable:()=>!0,dispatchTransaction:F=>{let P=U.state.apply(F);if(U.updateState(P),v!==P.doc){let N=it.isOn("pasteMarkdown")?Eo(P.doc,C):No(P.doc);o(N),v=P.doc}}});t.current&&(t.current.innerHTML="",t.current.appendChild(U.dom)),r=U}return i(),()=>r?.destroy()},[n,o,e]),(0,xc.jsx)("div",{ref:t,className:Cc})}function $e({tree:n,webPageNodeId:o}){let e=n.getNodeWithTrait(o,Ii);if(e?.loaded)return e.loaded;e?.load().catch(ie)}function Fe({screenWidth:n,tree:o,webPageNodeId:e}){let r=$e({tree:o,webPageNodeId:e})?.getBreakpointValues(),i=ki(r,n);return o.get(i)}function _e(n,o,e){let t=e.temporaryCollectionItemNodeId??n.collectionItemNodeId;return o.tree.getNodeWithTrait(t,Ye)??void 0}function Kt(n,o,e){let t=_e(n,o,e);if(t)return o.tree.getNodeWithTrait(t.parentid,Tt)??void 0}var H=class{constructor(o){this.engine=o}};var zf=/^(?<hashes>#{1,6})\s$/u,Ce=class n extends H{constructor(e,t,r,i="none"){super(e);this.nodeId=t;this.renderId=r;this.eventSource=i;w(this,"handleOnFocus",()=>this.proseMirrorEditor?.controls.handleOnFocus());w(this,"handleOnBlur",()=>this.proseMirrorEditor?.controls.handleOnBlur());w(this,"proseMirrorEditor",null);w(this,"hasTextFitViewBox",!1);this.engine.beginUndoGroup(),this.start()}getRichTextNode(){return this.engine.tree.getNodeWithTrait(this.nodeId,k)}update(){let e=this.getRichTextNode();if(!e||!n.supportsNode(e)){this.engine.exitTool();return}if(!e.textFitViewBoxSize||this.hasTextFitViewBox)return;let t=Ji(this.engine.tree,e);this.engine.stores.projectStore.commitTreeAndSend(),t&&(this.hasTextFitViewBox=!0)}async stop(){let e=this.getRichTextNode();e&&(e.cache.isEditable=!1),this.proseMirrorEditor?.destroy(),this.proseMirrorEditor=null,this.engine.endUndoGroup(),this.engine.stores.toolStore.proseMirrorView=null,this.engine.stores.toolStore.nodeInTextEditorId=null}start(){let e=this.getRichTextNode();if(!e)return;this.hasTextFitViewBox=ji(this.engine.tree,e),this.engine.stores.projectStore.commitTreeAndSend();let t=Go(this.engine.tree,e);if(t.length===0){this.init();return}nt.loadFonts(t).catch(ie).finally(()=>this.init())}init(){this.startAsync().catch(e=>{ie(e),this.engine.exitTool()})}async startAsync(){let e=this.getRichTextNode();if(!e)return this.engine.exitTool();this.proseMirrorEditor=await this.createProseMirrorEditor(e),e.cache.isEditable=!0,this.engine.stores.toolStore.proseMirrorView=this.proseMirrorEditor.view}async createProseMirrorEditor(e){let{baseKeymap:t,chainCommands:r,createParagraphNear:i,Decoration:a,DecorationSet:c,dropCursor:l,EditorView:f,ellipsis:p,emDash:m,gapCursor:d,history:s,InputRule:g,inputRules:y,keymap:C,liftEmptyBlock:S,liftListItem:v,newlineInCode:U,redo:F,sinkListItem:P,splitBlock:N,splitListItem:Ie,toggleMark:Ke,undo:Be,undoInputRule:Q}=await Vt(),q=this.engine,A=at(vo),Xe=r(Ie(A.nodes.listItem),U,i,S,La(A),qa(A),(j,L)=>N(j,L&&(X=>{let ot=j.selection,Et=this.getRichTextNode();u(Et,"RichTextNode not found");let Te=ot.$from.node(1);if(!zn(Te)||!(ot.$to.parentOffset===ot.$to.parent.content.size))return L(X);let ye={...Te.attrs},ut=Vn(Te)&&ye.tag!=="p",no=X.mapping.map(j.selection.to),Nt=j.selection.$from.marks();if(ut){let Ze=Et.getNodeTextStylePreset(q.tree,"p")??Ln(q.tree,"p")??qn.createDefault("p");Kn(q,Ze),Et.setNodeTextStylePreset(Ze),q.stores.projectStore.commitTreeAndSend(),ye.textStylePreset=Ze.id,ye.tag="p",ye.inlineStyles={},ye.blockStyles={}}else{let Ze=Nt.find(Di);ye.inlineStyles={...ye.inlineStyles,...Ze?.attrs.inlineStyles}}X.setNodeMarkup(no-1,void 0,ye),X.setStoredMarks(Nt),ut&&X.removeStoredMark(A.marks.inlineStyles),L(X)})));function $r(){return q.exitTool(),!0}u(!D(e.htmlContent),"Can't edit rich text node when htmlContent variable is assigned"),u(!D(e.textContent),"Can't edit rich text node when textContent variable is assigned");let Dn=()=>{let j=this.getRichTextNode();u(j,"RichTextNode not found");let L=j.getNodeInlineCodeStylePreset(q.tree)??Xi(q.tree)??new Wi;return Zi(q,L),j.setNodeInlineCodeStylePreset(L),L.id},ei=(it.isOn("pasteMarkdown")?(j,L,X)=>ko(j,L,X):(j,L,X)=>Oo(j,X))(e.html,A,{plugins:[s(),C({"Mod-z":r(Q,Be),"Mod-Shift-z":F,"Shift-Enter":Do(A),"Mod-b":Ke(A.marks.bold),"Mod-i":Ke(A.marks.italic),"Shift-Tab":v(A.nodes.listItem),Tab:r(P(A.nodes.listItem),()=>!0),Backspace:r(Q,Mo(A)),Escape:$r,Enter:Xe,"Mod-Shift-c":Ke(A.marks.inlineCode,{get inlineCodeStylePreset(){return Dn()}})}),C(t),l({color:oa.cmsRichTextDropCursor,width:ae.richTextDropCursor}),d(),_o(),Ha({engine:this.engine,schema:A,nodeId:this.nodeId,getRichTextNode:()=>this.getRichTextNode()}),y({rules:[m,p,new g(zf,(j,L,X,ot)=>{let Et=j.doc.resolve(X),Te=Et.node(1),go=Et.before(1);if(!zn(Te))return null;let ye=j.tr,ut="h"+(L.groups?.hashes?.length||1),no=this.getRichTextNode();u(no,"RichTextNode not found");let Nt=no.getNodeTextStylePreset(q.tree,ut)??Ln(q.tree,ut)??qn.createDefault(ut),Ze=Nt.id;return Kn(q,Nt),no.setNodeTextStylePreset(Nt),q.stores.projectStore.commitTreeAndSend(),Vn(Te)||ye.removeMark(go,go+Te.nodeSize,A.marks.inlineStyles),ye.delete(X,ot),ye.setNodeMarkup(go,A.nodes.textBlock,{...Te.attrs,blockStyles:Ze?{}:Te.attrs.blockStyles,inlineStyles:Ze?{}:Te.attrs.inlineStyles,textStylePreset:Ze,tag:ut}),ye}),Ka(A),Xa(A)]}),...Va({markType:A.marks.inlineCode,attrs:{get inlineCodeStylePreset(){return Dn()}}})]}),ti,tt=new f(null,{state:ei,dispatchTransaction:j=>{let L=this.getRichTextNode();u(L,"Node should not be null");let X=tt.state.apply(j);if(tt.updateState(X),X=Yi(X,tt,L),ti!==X.doc){let ot=it.isOn("pasteMarkdown")?Eo(X.doc,A):No(X.doc);L.html!==ot&&(n.updateNodeWithBreakpointAwareness({engine:this.engine,html:ot,node:L}),Hi(L,tt)),ti=X.doc}this.engine.stores.projectStore.commitTreeAndSend()}});return{controls:{handleOnFocus(){tt.setProps({decorations(){}})},handleOnBlur(){tt.setProps({decorations(j){let L=j.selection;if(L.from!==L.to)return document.getSelection()?.removeAllRanges(),c.create(j.doc,[a.inline(L.from,L.to,{class:"selection",nodeName:"mark"})])}})}},destroy:()=>tt.destroy(),state:ei,view:tt}}static updateNodeWithBreakpointAwareness({engine:e,node:t,html:r,breakpointNode:i}){let{tree:a,stores:c}=e,{routeStore:l,canvasStore:f,treeStore:p}=c;i??=Fe({screenWidth:f.screenWidth,tree:p.tree,webPageNodeId:l.webPageNodeId});let m=t.originalid??t.id,d=!gi(i)||Ei(i)||!m,s=!Bo(a,t,"html"),g=a.getNodeWithTrait(m,k);if(u(g,`originalNode with id ${m} must exist`),d||s){g.set({html:r});return}if(t.getTextContent()===g.getTextContent()){g.set({html:qi(g.html,Li(r))});return}t.set({html:r},a,!1,!1)}static supportsNode(e){return k(e)&&!e.htmlContent&&!e.textContent}};function me(){let n=b();return E(()=>$e({tree:n.stores.treeStore.tree,webPageNodeId:n.stores.routeStore.webPageNodeId}),[])}function Uc(){let n=b(),{routeStore:o,treeStore:e,canvasStore:t}=n.stores;return Je(()=>_e(o,e,t),[],[o,e,t])}function Ic(){let n=b(),{routeStore:o,treeStore:e,canvasStore:t}=n.stores;return Je(()=>Kt(o,e,t),[],[o,e,t])}var we=h($());var bc="modal_m168h77v";var pe=h(x());function Fc({richTextNodeId:n}){let o=b(),e=me(),[t,r]=(0,we.useState)(()=>{let g=Fe({screenWidth:o.stores.canvasStore.screenWidth,tree:o.stores.treeStore.tree,webPageNodeId:o.stores.routeStore.webPageNodeId});return u(g,"activeOnPageBreakpointNode must exist"),g.id}),i=(0,we.useRef)(new Map),a=(0,we.useMemo)(()=>o.stores.treeStore.tree.getNodeWithTrait(n,k)?.originalid??n,[n]),c=(0,we.useCallback)(()=>o.stores.scopeStore.active.getTopLevelReplicaVariants().find(({id:g})=>t===g),[t]),l=(0,we.useCallback)(()=>{let g=c();if(!g)return;let y=ao(g.id,a),C=o.stores.treeStore.tree.get(y);return k(C)?C:void 0},[c,a]),f=E(()=>o.stores.scopeStore.active.getPrimaryVariant().id,[]),p=(0,we.useMemo)(()=>{let g=i.current.get(t);if(g!==void 0)return g;if(t===f){let y=o.stores.treeStore.tree.getNodeWithTrait(a,k);return u(y,"originalNode should exist"),y.html}return l()?.html??""},[l,f,t,a]),m=(0,we.useCallback)(g=>i.current.set(t,g),[t]),d=(0,we.useCallback)(()=>{o.exitTool(),o.stores.modalStore.dismiss()},[]),s=(0,we.useCallback)(()=>{let g=o.stores.scopeStore.active.getPrimaryVariant(),y=i.current.get(g.id);if(y!==void 0){let C=o.stores.treeStore.tree.getNodeWithTrait(a,k);u(C,`originalNode with id ${a} must exist`),C.html!==y&&C.set({html:y})}o.stores.scopeStore.active.getTopLevelReplicaVariants().forEach(C=>{let S=i.current.get(C.id);if(S===void 0)return;let v=ao(C.id,a),U=o.stores.treeStore.tree.get(v);k(U)&&U.html!==S&&Ce.updateNodeWithBreakpointAwareness({breakpointNode:C,engine:o,html:S,node:U})}),i.current.clear(),o.stores.projectStore.commitTreeAndSend(),d()},[d,a]);return(0,pe.jsxs)(Rt,{visible:!0,hasBackdrop:!0,onDismiss:d,className:bc,children:[(0,pe.jsx)(Dt,{separator:!0,title:"Responsive Text",children:(0,pe.jsx)(Mt,{onDismiss:d})}),(0,pe.jsxs)(he,{gap:ae.inputSpacing,paddingTop:ae.modalPadding,children:[(0,pe.jsx)(Sa,{children:e?.getTopLevelVariants().map(g=>(0,pe.jsx)(Fa,{identifier:g.id,title:g.name??g.id,selected:t===g.id,onSelect:r},g.id))}),(0,pe.jsx)(wc,{initialHtml:p,onContentChange:m,onEscape:d})]}),(0,pe.jsxs)(Ro,{displayDivider:!0,children:[(0,pe.jsx)(K,{bold:!0,onClick:d,variant:"default",children:(0,pe.jsx)(He,{children:"Cancel"})}),(0,pe.jsx)(K,{bold:!0,onClick:s,variant:"primary",children:(0,pe.jsx)(He,{children:"Save"})})]})]})}var an=h($());var Sc="modal_m1cvfiap",vc="form_f1nz04q2",Pc="scroll_syo0l7n",Ec="width100_w9541mz",hr="editor_e73gufq";var ft=h(x()),Nc=["left","right","auto-vertical"];function Oc({controlKey:n,nodeId:o}){let e=_(),t=()=>{e.stores.modalStore.dismiss()},r=Je(()=>{let s=e.stores.treeStore.tree.get(o);return!Ye(s)&&!Pe(s)?null:s},[o],["Tree"]),i=Je(()=>{let d=e.tree.getScopeNodeFor(r);return d?Da(d):null},[r],["Tree"]),a=Je(()=>{if(Ye(r)){let d=r?.parentid,s=e.stores.treeStore.tree,g=s.getNodeWithTrait(d,Tt);if(!g)return null;let C=g.getPropertyControls(s)[n];return C?.type==="richtext"?C:null}if(Pe(r)){let d=te.reactComponentForIdentifier(r.codeComponentIdentifier);if(!d)return null;let s=d.properties[n];return s?.type==="richtext"?s:null}return null},[n,r],["Tree","ActiveBundle"]),c=(0,an.useMemo)(()=>{if(!r)return"";let d=kc(r,n);return ce(d?.value)?d.value:""},[r,n]),l=!!i&&!!r&&a?.type==="richtext",f=d=>{if(!r)return;let s=e.stores.treeStore.tree.current(r);if(!s)return;let g,y=kc(r,n);y?g={...y,value:d}:g={type:"richtext",value:d},Ye(s),s.setControlProp(n,g),u(ka(e),"Only on-page engine can commit tree"),e.stores.projectStore.commitTreeAndSend()};(0,an.useEffect)(()=>{l||e.stores.modalStore.dismiss()},[l]);let p=Zo(()=>at(bo(r)?Po:Mi)),m=Bt("pasteMarkdown");return l?(0,ft.jsxs)(Rt,{visible:!0,hasBackdrop:!0,onDismiss:t,className:Sc,formClassName:vc,children:[(0,ft.jsx)(Dt,{separator:!0,title:a.title??"Unknown",className:Ec,children:(0,ft.jsx)(Mt,{onDismiss:t})}),(0,ft.jsx)(Ca,{className:Pc,children:m?(0,ft.jsx)(jo,{enabled:!0,schema:p,className:hr,defaultValue:c,onChange:f,scopeType:i,onUnsavedChange:lt,popoverAttachmentEdge:Nc,fallbackToModalAppearance:!0,saveOnMetaArrowNavigation:!0}):(0,ft.jsx)(Yo,{enabled:!0,supportsEmbeds:bo(r),supportsMedia:bo(r),className:hr,defaultValue:c,onChange:f,scopeType:i,onUnsavedChange:lt,popoverAttachmentEdge:Nc,fallbackToModalAppearance:!0,saveOnMetaArrowNavigation:!0})})]}):null}function kc(n,o){if(Ye(n)){let e=n.getControlProp(o);return e?.type==="richtext"&&ce(e.value)?e:null}if(Pe(n)){let e=te.reactComponentForIdentifier(n.codeComponentIdentifier);if(!e)return null;let r=n.getControlProps(e.properties)[o];if(r?.type==="richtext"&&ce(r.value))return r}return null}var co=h(x()),Lf={AcquireAddonModal:null,AcquireAdvancedAnalyticsTrialModal:null,AddToLibrary:null,BatchTranslate:null,CodeFileCreation:null,CompleteSignup:null,ComponentIsolationModal:null,Confirmation:js,ConfirmBatchTranslateAll:null,ConfirmDefaultLanguage:null,ConfirmDeleteCollectionItems:null,ConfirmDestructiveFeedbackAction:null,ConfirmDraftCollectionItem:null,ConfirmDraftLocale:null,ConfirmDraftPage:null,ConfirmPublishAbTest:null,ConfirmPublishDraftCollectionItem:null,ConfirmPublishDraftLocale:null,ConfirmPublishDraftPage:null,ConfirmRemoveTriggerEvent:null,ConfirmUpdatingAbVariants:null,ConvertToCMSPage:null,CreateAbTest:null,CreateComponent:null,CreateLayoutTemplate:null,CreateManagedCollection:null,CreateTeam:null,DashboardAddRedirect:null,DashboardAddRewrite:null,DashboardEditRedirect:null,DashboardEditRewrite:null,CustomBreakpoint:null,DeleteCodeFile:null,DeleteCustomFont:null,DeleteEntityFolder:null,DeleteFile:null,DeleteMultipleCodeFiles:null,DeleteMultipleEntityFolders:null,DeprecatedDrafts:null,DuplicateProjectWithVersion:null,DuplicateWebPage:null,FigmaImportTutorial:null,FlexToYearly:null,ImageCrop:Ys,ImageFocalPoint:Hs,ImportFigma:null,ImportRedirects:null,LoadingFullDocument:null,LocaleReady:null,LocaleSettings:null,LocalizationGlossary:null,None:null,NudgePreferences:null,OnPageCMSFieldsModal:hc,OnPageRichTextEditor:Oc,OnPageRichTextVariantOverride:Fc,OverrideFile:null,PasteFromFigma:null,PlanCancellation:null,PluginCustomHTML:null,PluginFromURL:null,PluginWithModePicker:null,PublishModule:null,QuickActions:null,RemoveTeamLibraryModule:null,ReplaceTextStylePreset:null,ReplaceWebPage:null,SelectProjectToUpgrade:null,Shortcuts:null,StopAbTest:null,SubscriptionNotInOrder:null,TransferProject:null,UnlinkComponent:null,UnsavedChanges:null,UnsupportedFileSize:null,UnsupportedFileType:null,UpgradeDocument:null,UpsellEnterprise:null,UpsellFeature:null,Variables:null,VectorImport:null,VectorSetCreation:null,Welcome:null};function Bc(){let o=b().stores.modalStore.useState(e=>e.stack);return o.map((e,t)=>{if(e.type==="None")return null;let r=Lf[e.type];u(r,`Modal is missing: ${e.type}`);let{type:i,...a}=e,c=t===o.length-1,l=e.type+t;return(0,co.jsx)(pa,{allowFocusTrap:c,children:(0,co.jsx)(xa.Provider,{value:Cs(i),children:(0,co.jsx)(wa.Provider,{value:c?"visible":"hidden",children:(0,co.jsx)(r,{...a})})})},l)})}function Ac({accessStore:n,routeStore:o},e){let t=n.access;u(t.status==="success","Can't open Framer if project access is not successful");let r=e??o.projectLinkNodeId,i=`${wo().app}/projects/${t.data.projectSlug}?node=${r}`;window.open(`https://www.framer.com/open-in-app?url=${encodeURIComponent(i)}`,"_blank")}var Vc=h($());var Rc="toolbar_t49i6vy",wt="button_bjwo6qr",Xt="buttonSecondary_b1qwl3y9",Dc="mainContentContainer_m1wta5up",Mc="mainContent_m69kutt",Cr="secondaryText_sdjdrec",_c="logoIcon_l9efojb";var wr={slug:!0,string:!0,richtext:!0,link:!0,image:!0,array:!0,multicollectionreference:!0,collectionreference:!0,file:!0,date:!0,number:!0,boolean:!0,enum:!0,color:!0};function sn(n){return Ps(n).flatMap(t=>{let r=t.type;return wr[r]!==void 0?t.id:[]})}var O=h(x());function zc(){let n=b(),{routeStore:o,treeStore:e,canvasStore:t,projectStore:r,modalStore:i}=n.stores,a=E(()=>n.stores.canvasStore.finishedEditing,[]),{hasPermanentlyFailed:c}=r.useState(),l=a?.isNewItem?"Page saved":"Site saved",f=Uc(),p=Ic(),m=(0,Vc.useCallback)(()=>{u(p,"Collection node must exist"),u(f,"Collection item node must exist");let g=sn(p);n.exitTool(),i.set({type:"OnPageCMSFieldsModal",fieldIdsToShow:g,requiredFieldsOnly:!1,source:"on_page_hud",collectionItemId:f.id,collectionNodeId:p.id})},[o,e,i,n,f,p]),d=()=>{i.set({type:"Confirmation",title:"Discard Changes",description:"All changes will be lost. This action cannot be undone.",confirmLabel:"Discard",cancelLabel:"Cancel",variant:"destructive",source:"on_page_hud",onConfirm:()=>{t.discardTemporaryCollectionItem()}})},s=!!f?.privateToUserId;return(0,O.jsx)(O.Fragment,{children:(0,O.jsxs)("div",{className:Rc,children:[s?(0,O.jsxs)(K,{className:Y(wt,Xt),onClick:d,children:[(0,O.jsx)(sa,{}),"Discard Page"]}):(0,O.jsx)(Xf,{finishedEditing:a}),(0,O.jsxs)("div",{className:Dc,children:[(0,O.jsx)(Gc,{desktopText:"Click to edit",mobileText:"Tap to edit",secondaryText:"Changes are auto-saved",isVisible:!a}),(0,O.jsx)(Gc,{desktopText:l,mobileText:l,secondaryText:`A notification was sent to your collaborators. ${a?.isNewItem?"The page":"Changes"} will be visible when the project is published.`,isVisible:!!a})]}),(0,O.jsxs)(he,{direction:"row",gap:10,children:[p&&!s&&!p.managedByPlugin&&!a&&(0,O.jsxs)(K,{className:Y(wt,Xt),enabled:!c,onClick:()=>t.createTemporaryCollectionItem(),"aria-label":"Add Page",children:[(0,O.jsx)(da,{}),(0,O.jsx)(ln,{desktopText:"Add Page",mobileText:"Page"})]}),s&&!c&&(0,O.jsxs)(K,{className:Y(wt,Xt),onClick:m,children:[(0,O.jsx)(jf,{}),"Show All Fields"]}),a?(0,O.jsxs)(K,{className:Y(wt,Xt),onClick:()=>t.handleDismissFinishEditing(),children:[(0,O.jsx)(Zf,{}),"Go Back to Site"]}):(0,O.jsxs)(K,{variant:"primary",className:wt,onClick:()=>t.handleFinishEditing(),children:[(0,O.jsx)(aa,{"aria-hidden":"true"}),(0,O.jsx)(ln,{desktopText:"Finish Editing",mobileText:"Done"})]})]})]})})}function Gc({desktopText:n,mobileText:o,secondaryText:e,isVisible:t}){return(0,O.jsx)(ci,{children:t&&(0,O.jsxs)(Re.div,{className:Mc,initial:{marginTop:10,opacity:0},animate:{marginTop:0,opacity:1},exit:{marginTop:-10,opacity:0},children:[(0,O.jsx)(ln,{desktopText:n,mobileText:o}),(0,O.jsx)("span",{className:Cr,children:"\xB7"}),(0,O.jsx)("span",{className:Cr,children:e})]})})}function ln({desktopText:n,mobileText:o}){let e=ks(`(max-width: ${ta.tabletSmall}px)`);return!o&&e?null:(0,O.jsx)("span",{children:e?o:n})}function Xf({finishedEditing:n}){let o=b(),e=()=>{Ac(o.stores,n?.isNewItem?n.nodeId:void 0)};return(0,O.jsxs)(K,{className:Y(wt,Xt),onClick:e,"aria-label":"Open in Framer",children:[(0,O.jsx)(la,{"aria-hidden":"true",className:_c}),(0,O.jsx)(ln,{desktopText:"Open in Framer"})]})}function Zf(){return(0,O.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"9",height:"9",fill:"none",children:[(0,O.jsx)("path",{d:"M 1.5 7.5 L 8 1",fill:"transparent",strokeWidth:"1.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),(0,O.jsx)("path",{d:"M 3 1 L 8 1 L 8 6",fill:"transparent",strokeWidth:"1.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})]})}function jf(){return(0,O.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"11",height:"11",fill:"none",children:[(0,O.jsx)("path",{d:"M1 5.5s1.5-3 4.5-3 4.5 3 4.5 3-1.5 3-4.5 3-4.5-3-4.5-3Z",fill:"transparent",strokeWidth:"1.5",stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round"}),(0,O.jsx)("path",{d:"M5.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Z",fill:"#fff"})]})}var Ge=class extends H{constructor(e,t,r,i){super(e);this.nodeId=t;this.renderId=r;this.eventSource=i}getNode(){return this.engine.tree.getNodeWithTrait(this.nodeId,At)||this.engine.tree.getNodeWithTrait(this.nodeId,k)}getVariableInfo(){let e=this.getNode();if(!e)return;let t=Wn(e);if(!t)return;let r=e.cache.getRenderInstance(this.renderId);if(r)return G(this.engine.tree,this.engine.stores.treeStore.sandboxCollectionData,t,"collectionreference",r.collectionItemId)}getControlProp(){return this.getVariableInfo()?.controlProp}changeValue(e){let t=this.getVariableInfo();if(!t)return;let{collectionItemNode:r,controlProp:i}=t;i.value!==e&&r.setControlProp(t.variableDefinition.id,{...i,value:e})}static supportsNode(e,t,r){let i=Wn(t);if(!i)return!1;let a=t.cache.getRenderInstance(r);return a?!!G(e.tree,e.stores.treeStore.sandboxCollectionData,i,"collectionreference",a.collectionItemId):!1}};var Ve=class n extends H{constructor(e,t,r){super(e);this.nodeId=t;this.renderId=r}getCodeComponentNode(){return this.engine.tree.getNodeWithTrait(this.nodeId,Pe)}getEditableControls(){let e=this.getCodeComponentNode();if(e)return n.getEditableControls(this.engine,e,this.renderId)}update(){let e=this.engine,t=this.getCodeComponentNode();(!t||!n.supportsNode(e,t,this.renderId))&&e.exitTool()}stop(){let{modalStore:e}=this.engine.stores;e.stack.some(({type:r})=>r==="OnPageRichTextEditor")&&e.dismissAll()}static getEditableControls(e,t,r){let i=t.cache.getRenderInstance(r);if(!i)return ho();let a=te.reactComponentForIdentifier(t.codeComponentIdentifier);if(!a)return ho();let c=t.getControlProps(a.properties);if(!c)return ho();let l=[],f=tl(e,t.codeComponentIdentifier);if(bi(t)&&f)if(Fi(t)){let p=G(e.tree,e.stores.treeStore.sandboxCollectionData,t.dynamicVectorSetIdentifier,"vectorsetitem",i.collectionItemId);p&&l.push({type:"collection",controlKey:"dynamicVectorSetIdentifier",variableInfo:p})}else oi(t.codeComponentIdentifier)&&l.push({type:"vectorSetItem",codeComponentIdentifier:t.codeComponentIdentifier});for(let p in c){let m=c[p];if(!m)continue;let d=a.properties[p];if(d){if(m.type==="string"){if(D(m.value)){let s=G(e.tree,e.stores.treeStore.sandboxCollectionData,m.value,m.type,i.collectionItemId);if(!s)continue;l.push({type:"collection",controlKey:p,variableInfo:s})}else if(!De(m.value)){u(d.type==="string");let s=Gt(d);u(s,"Reduced control prop should not be null"),_t(s,m,d),l.push({type:"component",controlKey:p,controlDescription:d,controlProp:m,reducedControlProp:s})}}if(m.type==="richtext"){if(D(m.value)){let s=G(e.tree,e.stores.treeStore.sandboxCollectionData,m.value,m.type,i.collectionItemId);if(!s)continue;l.push({type:"collection",controlKey:p,variableInfo:s})}else if(!De(m.value)){u(d.type==="richtext");let s=Gt(d);u(s,"Reduced control prop should not be null"),_t(s,m,d),l.push({type:"component",controlKey:p,controlDescription:d,controlProp:m,reducedControlProp:s})}}if(m.type==="image"){if(D(m.value)){let s=G(e.tree,e.stores.treeStore.sandboxCollectionData,m.value,m.type,i.collectionItemId);if(!s)continue;l.push({type:"collection",controlKey:p,variableInfo:s})}else if(!De(m.value)){u(d.type==="image"||d.type==="responsiveimage");let s=Gt(d);u(s,"Reduced control prop should not be null"),_t(s,m,d),l.push({type:"component",controlKey:p,controlDescription:d,controlProp:m,reducedControlProp:s})}}if(m.type==="date"){if(D(m.value)){let s=G(e.tree,e.stores.treeStore.sandboxCollectionData,m.value,"date",i.collectionItemId);if(!s)continue;l.push({type:"collection",controlKey:p,variableInfo:s})}else if(!De(m.value)){u(d.type==="date");let s=Gt(d);u(s,"Reduced control prop should not be null"),_t(s,m,d),l.push({type:"component",controlKey:p,controlDescription:d,controlProp:m,reducedControlProp:s})}}if(m.type==="vectorsetitem"){if(D(m.value)){let s=G(e.tree,e.stores.treeStore.sandboxCollectionData,m.value,"vectorsetitem",i.collectionItemId);if(!s)continue;l.push({type:"collection",controlKey:p,variableInfo:s})}else if(!De(m.value)){u(d.type==="vectorsetitem");let s=Gt(d);u(s,"Reduced control prop should not be null"),_t(s,m,d),l.push({type:"component",controlKey:p,controlDescription:d,controlProp:m,reducedControlProp:s})}}if(m.type==="link"&&D(m.value)){let s=G(e.tree,e.stores.treeStore.sandboxCollectionData,m.value,"link",i.collectionItemId);if(!s)continue;l.push({type:"collection",controlKey:p,variableInfo:s})}if(m.type==="boolean"&&D(m.value)){let s=G(e.tree,e.stores.treeStore.sandboxCollectionData,m.value,"boolean",i.collectionItemId);if(!s)continue;l.push({type:"collection",controlKey:p,variableInfo:s})}}}return l}static supportsNode(e,t,r){return Pe(t)?n.getEditableControls(e,t,r).length>0:!1}};var ze=class n extends H{constructor(e,t,r,i){super(e);this.nodeId=t;this.renderId=r;this.eventSource=i}getRichTextNode(){return this.engine.tree.getNodeWithTrait(this.nodeId,k)}getVariableInfo(){let e=this.getRichTextNode();if(!e)return;let t=e.cache.getRenderInstance(this.renderId);if(!t)return;let r=n.getVariableReference(e);if(r)return G(this.engine.tree,this.engine.stores.treeStore.sandboxCollectionData,r,"date",t.collectionItemId)}getControlProp(){return this.getVariableInfo()?.controlProp}changeValue(e){let t=this.getVariableInfo();if(!t)return;let{collectionItemNode:r,variableDefinition:i,controlProp:a}=t;a.value!==e&&(r.setControlProp(i.id,{...a,value:e}),this.engine.stores.projectStore.commitTreeAndSend())}update(){let e=this.engine,t=this.getRichTextNode();(!t||!n.supportsNode(e,t,this.renderId))&&e.exitTool()}static getVariableReference(e){let t=e.textContent;if(!Uo(t))return;let r=t.startValue;if(D(r))return r}static supportsNode(e,t,r){if(!k(t))return!1;let i=n.getVariableReference(t);if(!i)return!1;let a=t.cache.getRenderInstance(r);return a?!!G(e.tree,e.stores.treeStore.sandboxCollectionData,i,"date",a.collectionItemId):!1}};var We=class n extends H{constructor(e,t,r,i){super(e);this.nodeId=t;this.renderId=r;this.eventSource=i}getRichTextNode(){return this.engine.tree.getNodeWithTrait(this.nodeId,k)}static getVariableReference(e){let t=e.textContent;if(!Uo(t))return;let r=t.startValue;if(D(r))return r}getVariableInfo(){let e=this.getRichTextNode();if(!e)return;let t=e.cache.getRenderInstance(this.renderId);if(!t)return;let r=n.getVariableReference(e);if(r)return G(this.engine.tree,this.engine.stores.treeStore.sandboxCollectionData,r,"enum",t.collectionItemId)}getControlProp(){return this.getVariableInfo()?.controlProp}changeValue(e){let t=this.getVariableInfo();if(!t)return;let{collectionItemNode:r,variableDefinition:i,controlProp:a}=t;a.value!==e&&(r.setControlProp(i.id,{...a,value:e}),this.engine.stores.projectStore.commitTreeAndSend())}static supportsNode(e,t,r){if(!k(t))return!1;let i=n.getVariableReference(t);if(!i)return!1;let a=t.cache.getRenderInstance(r);return a?!!G(e.tree,e.stores.treeStore.sandboxCollectionData,i,"enum",a.collectionItemId):!1}};var qe=class n extends H{constructor(e,t,r){super(e);this.nodeId=t;this.renderId=r}update(){let e=this.engine,t=e.tree.get(this.nodeId);(!t||!n.supportsNode(e,t,this.renderId))&&e.exitTool()}static supportsNode(e,t,r){if(!At(t))return!1;if(D(t.fillImage)){let i=t.cache.getRenderInstance(r);return i?!!G(e.tree,e.stores.treeStore.sandboxCollectionData,t.fillImage,"image",i.collectionItemId):!1}return!wi(t.fillImage)}};var Ee=class n extends H{constructor(e,t,r,i){super(e);this.nodeId=t;this.renderId=r;this.eventSource=i;w(this,"controls");this.engine.beginUndoGroup(),Vt().then(a=>{e.stores.toolStore.proseMirror??=a})}getRichTextNode(){return this.engine.tree.getNodeWithTrait(this.nodeId,k)}getVariableReference(){let e=this.getRichTextNode();if(!e)return;let t=e.htmlContent;if(D(t))return t}getVariableInfo(){let e=this.getRichTextNode();if(!e)return;let t=e.cache.getRenderInstance(this.renderId);if(!t)return;let r=this.getVariableReference();if(r)return G(this.engine.tree,this.engine.stores.treeStore.sandboxCollectionData,r,"richtext",t.collectionItemId)}getControlProp(){return this.getVariableInfo()?.controlProp}changeValue(e){let t=this.getVariableInfo();if(!t)return;let{collectionItemNode:r,variableDefinition:i,controlProp:a}=t;a.value!==e&&(r.setControlProp(i.id,{...a,value:e}),this.engine.stores.projectStore.commitTreeAndSend())}update(){let e=this.engine,t=this.getRichTextNode();if(!t||!n.supportsNode(e,t,this.renderId))e.exitTool();else{let r=this.getVariableInfo();this.engine.stores.toolStore.validateCollectionControl(r)}}stop(){this.engine.endUndoGroup(),this.engine.stores.toolStore.nodeInTextEditorId=null}static supportsNode(e,t,r){if(!k(t)||!D(t.htmlContent))return!1;let i=t.cache.getRenderInstance(r);return i?!!G(e.tree,e.stores.treeStore.sandboxCollectionData,t.htmlContent,"richtext",i.collectionItemId):!1}};var Ne=class n extends H{constructor(e,t,r,i){super(e);this.nodeId=t;this.renderId=r;this.eventSource=i;this.engine.beginUndoGroup();let a=this.getRichTextNode();u(a,"Missing rich text node");let c=Go(this.engine.tree,a);nt.loadFonts(c).catch(ie)}getRichTextNode(){return this.engine.tree.getNodeWithTrait(this.nodeId,k)}getVariableReference(){let e=this.getRichTextNode();if(!e)return;let t=e.textContent;if(D(t))return t}getVariableInfo(){let e=this.getRichTextNode();if(!e)return;let t=e.cache.getRenderInstance(this.renderId);if(!t)return;let r=this.getVariableReference();if(r)return G(this.engine.tree,this.engine.stores.treeStore.sandboxCollectionData,r,"string",t.collectionItemId)}getControlProp(){return this.getVariableInfo()?.controlProp}changeValue(e){let t=this.getVariableInfo();if(!t)return;let{collectionItemNode:r,variableDefinition:i,controlProp:a}=t;a.value!==e&&(r.setControlProp(i.id,{...a,value:e}),this.engine.stores.projectStore.commitTreeAndSend())}update(){let e=this.engine,t=this.getRichTextNode();if(!t||!n.supportsNode(e,t,this.renderId))e.exitTool();else{let r=this.getVariableInfo();this.engine.stores.toolStore.validateCollectionControl(r)}}stop(){this.engine.endUndoGroup(),this.engine.stores.toolStore.nodeInTextEditorId=null}static supportsNode(e,t,r){if(!k(t)||!D(t.textContent))return!1;let i=t.cache.getRenderInstance(r);return i?!!G(e.tree,e.stores.treeStore.sandboxCollectionData,t.textContent,"string",i.collectionItemId):!1}};var ke=class n extends H{update(){let o=this.engine,{routeStore:e,canvasStore:t,treeStore:r,mouseStore:i,toolStore:a}=o.stores,c=Fe({screenWidth:t.screenWidth,tree:r.tree,webPageNodeId:e.webPageNodeId});if(!c||i.isHoveringFloatingCanvasChrome)return;if(i.isHoveringChrome){a.highlightedRenderId=void 0;return}let l=r.tree,f=i.canvasMousePosition,p=l.getNodeRendersAtPoint(c,f,!0),m=$i(p,l),s=m.filter(C=>n.isSelectableNodeOrTopLevelRepeaterNode(o,C.node,C.renderId)).at(-1);if(s){o.stores.toolStore.highlightedRenderId=s.renderId;return}let y=m.filter(C=>n.isUnexpectedlyUnselectableNode(o,C.node,C.renderId)).at(-1);if(y){a.highlightedRenderId=y.renderId;return}a.highlightedRenderId=void 0}static isSelectableNodeOrTopLevelRepeaterNode(o,e,t){return n.isSelectableNode(o,e,t)||cn(o,e)}static isSelectableNode(o,e,t){return Ve.supportsNode(o,e,t)||ze.supportsNode(o,e,t)||qe.supportsNode(o,e,t)||Ce.supportsNode(e)||Ee.supportsNode(o,e,t)||Ne.supportsNode(o,e,t)||Ge.supportsNode(o,e,t)||We.supportsNode(o,e,t)}static isUnexpectedlyUnselectableNode(o,e,t){return n.isSelectableNode(o,e,t)?!1:_i(e)||Pe(e)}};function cn(n,o){return!(!Ui(o)||Us(n.tree,o)||Io(n.tree.getWebPageNodeFor(o)))}var Kc=h($());var Wc="container_ci35ri5",qc="shockwaveMask_suurpvn",Lc="shockwaveNodeHighlight_s1xlu29h";var dn=h(x()),Xc=(0,Kc.memo)(function(){let o=b(),e=E(()=>o.stores.editableNodeHighlightStore.editableNodesHighlight,[]);return e?(0,dn.jsx)(Re.div,{className:Y(Wc,qc),initial:{"--radius":`${e.minRadius}px`},animate:{"--radius":`${e.maxRadius}px`},transition:{duration:e.animationDuration/1e3,ease:"easeOut"},style:{top:e.minY,height:e.maxY-e.minY,"--x":`${e.originX}px`,"--y":`${e.originY}px`,"--gradient-size":`${e.gradientSize}px`},children:(0,dn.jsx)("div",{style:{position:"absolute",top:-e.minY},children:e.highlights.map(t=>(0,dn.jsx)("div",{className:Lc,style:{width:t.width,height:t.height,transform:t.transform,transformOrigin:"top left"}},t.renderId))})},e.animationId):null});var Zc="hudContainer_h1czcor4";var Yc=h($());var fn=h($()),jc=h(x()),ee=(0,fn.forwardRef)(function({tree:o,node:e,renderId:t,style:r,overrideRect:i,...a},c){let l=(0,fn.useMemo)(()=>{if(i)return i;let p=o.getRect(e,void 0,void 0,void 0,t);return{width:p.width,height:p.height,x:0,y:0}},[o,e,t,i]),f=o.transformMatrixToNode(e,void 0,void 0,t);return(0,jc.jsx)("div",{...a,ref:c,style:{position:"absolute",width:l.width,height:l.height,top:l.y,left:l.x,transformOrigin:"top left",transform:f.toString(),...r}})});var xr=h(x());function Hc({tool:n}){let{renderId:o}=n,e=me(),t=b(),r=t.tree,i=(0,Yc.useRef)(null),a=n.getNode();if(Wt(i,()=>{t.exitTool()}),!!a&&e)return(0,xr.jsx)(ee,{ref:i,tree:r,node:a,renderId:o,children:(0,xr.jsx)(zs,{tool:n,node:a,renderId:o,scopeNode:e})})}var Jc="validationBadge_v1r7rm12";var pn=h(x());function Jf(n){return n.message}function mn({validationWarning:n}){if(!n)return null;let o=Jf(n);return(0,pn.jsxs)("div",{className:Jc,children:[(0,pn.jsx)(fa,{width:10,height:10}),o]})}var fo=h(x());function Qc({tool:n}){let{nodeId:o,renderId:e}=n,t=b(),r=E(()=>t.stores.toolStore.validationWarning,[]),i=E(()=>t.stores.treeStore.tree,[]),a=E(()=>t.stores.toolStore.editorOverlayClipPath,[]),c=me(),l=E(()=>t.stores.toolStore.proseMirror,[]),f=i.getNodeWithTrait(o,k);if(!f||!c||!l)return;function p(m){m.target===m.currentTarget&&t.exitTool()}return(0,fo.jsxs)(ee,{tree:i,node:f,renderId:e,children:[(0,fo.jsx)(mn,{validationWarning:r}),(0,fo.jsx)(Ks,{tool:n,scopeNode:c,node:f,renderId:e,proseMirror:l,zoom:1,onClickOutside:p,hasValidationWarning:!!r,style:{clipPath:a}})]})}var Zt=h($());var $c="popover_p6dts5z",ed="popoverWithModalInFront_pcmqzkm";var un="nodeHighlight_nbqylm8",td="visuallyHidden_v1pcr3uc",od="pointerCursor_p1mivvux",nd="textCursor_t42x8tu",rd="notAllowedCursor_n1atul0u",id="background_b1i0g06w",ad="repeaterActionButtonLine_r1t4nog5",sd="repeaterActionButtonTop_r1wgs7ug",ld="repeaterActionButtonBottom_rsrrcv7",cd="repeaterActionButtonLeft_rckttk2",dd="repeaterActionButtonRight_r12nxotj",fd="repeaterActionButton_r460cpk",md="repeaterActionIcon_rrb252f",pd="clickThrough_cxpkzma";var J=h(x()),$f=["bottom","top","right","left"],em={x:ae.inputSpacing,y:ae.inputSpacing};function gd({tool:n}){let[o,e]=(0,Zt.useState)(null),t=b(),r=t.stores.modalStore.useState(s=>s.active.type!=="None"),[i,a]=(0,Zt.useState)(!1);!i&&r&&a(!0);let c=E(()=>t.stores.treeStore.tree,[]),l=c.getNodeWithTrait(n.nodeId,Pi),f=(0,Zt.useMemo)(()=>{let s=c;return n.getEditableControls()},[n,c]);function p(){t.exitTool()}let m=l?.id,d=(0,Zt.useMemo)(()=>m?[m]:[],[m]);if(!(!l||!f||f.length===0))return(0,J.jsx)(ee,{tree:c,node:l,ref:e,renderId:n.renderId,className:un,children:(0,J.jsx)(Ao,{anchor:o,alignSelf:"center",attachTo:$f,offset:em,onClose:p,showArrow:!0,arrow:{anchor:o,alignSelf:"center"},fallbackToModalAppearance:!0,backdropTintEnabled:!1,className:Y($c,r&&ed),focusTrapEnabled:!r,animateAppear:!i,zIndex:21,children:(0,J.jsx)(Ws,{displayDivider:!0,title:tm(l),onClose:p,children:(0,J.jsx)(he,{gap:0,paddingTop:ae.inputSpacing,paddingBottom:ae.inputSpacing,paddingLeft:ae.panelPadding,paddingRight:ae.panelPadding,children:f.map(s=>{if(s.type==="vectorSetItem")return(0,J.jsx)(el,{nodeIds:d,supportsVariables:!1,dynamicVectorSetIdentifier:void 0,codeComponentIdentifier:s.codeComponentIdentifier},"vectorSet");if(s.type==="component")switch(s.controlDescription.type){case"string":return u(s.reducedControlProp.type==="string"),(0,J.jsx)(so,{nodeIds:d,controlKey:s.controlKey,control:s.controlDescription,controlProp:s.reducedControlProp,onChange:(F,P)=>{u(s.controlProp.type==="string");let N=P(s.controlProp);ve(N,s.controlProp)||(l.setControlProp(F,N),t.stores.projectStore.commitTreeAndSend())}},s.controlKey);case"richtext":return u(s.reducedControlProp.type==="richtext"),(0,J.jsx)(Xn,{title:s.controlDescription.title??"Unknown",children:(0,J.jsx)(K,{title:"Edit Content",className:Zn,onClick:()=>{t.stores.modalStore.set({type:"OnPageRichTextEditor",controlKey:s.controlKey,nodeId:n.nodeId,source:"on_page_hud"})}})},s.controlKey);case"image":case"responsiveimage":return u(s.reducedControlProp.type==="image"||s.reducedControlProp.type==="responsiveimage"),(0,J.jsx)(Hn,{nodeIds:d,controlKey:s.controlKey,control:s.controlDescription,controlProp:s.reducedControlProp,onChange:(F,P)=>{u(y.type==="image");let N=P(y);ve(N,y)||(l.setControlProp(F,N),t.stores.projectStore.commitTreeAndSend())},onUpload:async(F,P)=>{let N=await F;if(!N)return;u(s.controlProp.type==="image");let Ie=Qs(s.controlProp,N);l.setControlProp(P,Ie),t.stores.projectStore.commitTreeAndSend()}},s.controlKey);case"date":return u(s.reducedControlProp.type==="date"),(0,J.jsx)(jn,{controlKey:s.controlKey,control:s.controlDescription,controlProp:s.reducedControlProp,onChange:(F,P)=>{u(F.type==="date"),!ve(F,y)&&(l.setControlProp(P,F),t.stores.projectStore.commitTreeAndSend())}},s.controlKey);case"vectorsetitem":return u(s.reducedControlProp.type==="vectorsetitem"),(0,J.jsx)(Jn,{controlKey:s.controlKey,control:s.controlDescription,controlProp:s.reducedControlProp,onChange:(F,P)=>{u(F.type==="vectorsetitem"),!ve(F,s.controlProp)&&(l.setControlProp(P,F),t.stores.projectStore.commitTreeAndSend())}},s.controlKey);default:ro(s.controlDescription)}let{variableInfo:g}=s,{controlProp:y,controlDescription:C,collectionItemNode:S,variableDefinition:v,reducedControlProp:U}=g;switch(y.type){case"string":return u(C.type==="string"),u(U.type==="string"),(0,J.jsx)(so,{nodeIds:d,controlKey:v.id,control:C,controlProp:U,onChange:(F,P)=>{u(y.type==="string");let N=P(y);ve(N,y)||(S.setControlProp(F,N),t.stores.projectStore.commitTreeAndSend())}},s.controlKey);case"richtext":return u(C.type==="richtext"),u(U.type==="richtext"),(0,J.jsx)(Xn,{title:C.title||Ci(v.id),children:(0,J.jsx)(K,{title:"Edit Content",className:Zn,onClick:()=>{t.stores.modalStore.set({type:"OnPageRichTextEditor",controlKey:v.id,nodeId:S.id,source:"on_page_hud"})}})},s.controlKey);case"image":return u(C.type==="responsiveimage"),u(U.type==="responsiveimage"),(0,J.jsx)(Hn,{nodeIds:d,controlKey:v.id,control:C,controlProp:U,onChange:(F,P)=>{u(y.type==="image");let N=P(y);ve(N,y)||(S.setControlProp(F,N),t.stores.projectStore.commitTreeAndSend())},onUpload:async(F,P)=>{let N=await F;N&&(S.setControlProp(P,{type:"image",value:N}),t.stores.projectStore.commitTreeAndSend())}},s.controlKey);case"date":return u(C.type==="date"),u(U.type==="date"),(0,J.jsx)(jn,{controlKey:v.id,control:C,controlProp:U,onChange:(F,P)=>{u(F.type==="date"),u(y.type==="date"),!ve(F,y)&&(S.setControlProp(P,F),t.stores.projectStore.commitTreeAndSend())}},s.controlKey);case"link":return u(C.type==="link"),u(U.type==="link"),(0,J.jsx)(wl,{controlKey:v.id,control:C,controlProp:U,onChange:(F,P)=>{u(y.type==="link");let N=P(y);ve(N,y)||(S.setControlProp(F,N),t.stores.projectStore.commitTreeAndSend())}},s.controlKey);case"boolean":return u(C.type==="boolean"),u(U.type==="boolean"),(0,J.jsx)(Ho,{nodeIds:d,controlKey:v.id,control:C,controlProp:U,onChange:(F,P)=>{u(F.type==="boolean"),u(y.type==="boolean"),!ve(F,y)&&(S.setControlProp(P,F),t.stores.projectStore.commitTreeAndSend())}},s.controlKey);case"vectorsetitem":return u(C.type==="vectorsetitem"),u(U.type==="vectorsetitem"),(0,J.jsx)(Jn,{controlKey:v.id,control:C,controlProp:U,onChange:(F,P)=>{u(F.type==="vectorsetitem"),u(y.type==="vectorsetitem"),!ve(F,y)&&(S.setControlProp(P,F),t.stores.projectStore.commitTreeAndSend())}},s.controlKey);default:ro(y)}})})})})})}function tm(n){let o=te.reactComponentForIdentifier(n.codeComponentIdentifier);return o?o.name:"Component"}var gn=h($());var Ur=h(x());function yd({tool:n}){let{nodeId:o,renderId:e}=n,t=b(),r=t.tree,i=(0,gn.useRef)(null),a=me(),c=r.getNodeWithTrait(o,k);if(Wt(i,()=>{t.exitTool()}),(0,gn.useEffect)(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"})),!!c&&a)return(0,Ur.jsx)(ee,{ref:i,tree:r,node:c,renderId:e,children:(0,Ur.jsx)(qs,{tool:n,scopeNode:a,node:c,renderId:e,backdropEnabled:!0})})}var hd=h($());var Ir=h(x());function Cd({tool:n}){let{nodeId:o,renderId:e}=n,t=b(),r=t.tree,i=(0,hd.useRef)(null),a=me(),c=r.getNodeWithTrait(o,k);if(Wt(i,()=>{t.exitTool()}),!!c&&a)return(0,Ir.jsx)(ee,{ref:i,tree:r,node:c,renderId:e,children:(0,Ir.jsx)(Ls,{tool:n,node:c,renderId:e,scopeNode:a})})}var xt=h($());var le=h(x());function wd(){let n=b(),o=E(()=>n.stores.treeStore.tree,[]),e=E(()=>n.stores.toolStore.highlightedRenderId,[]),t=E(()=>n.stores.mouseStore.lastUpdateType==="scroll",[]),r=E(()=>n.stores.mouseStore.isHoveringFloatingCanvasChrome,[]),i=Bt("onPageQuickAddRepeaterItems"),a=yt(e),c=o.get(a),l=fi(c),f=!de(e),p=im(c,e),m=(0,xt.useMemo)(()=>{if(!i||!c||!e)return null;if(cn(n,c))return c;let y=c.ancestors();for(let C of y)if(cn(n,C))return C;return null},[c,e,i]),d=l&&f&&ke.isSelectableNode(n,c,e),s=l&&f&&ke.isUnexpectedlyUnselectableNode(n,c,e),g=l&&f&&(Ce.supportsNode(c)||Ee.supportsNode(n,c,e)||Ne.supportsNode(n,c,e));return(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(om,{notAllowedCursor:s}),l&&f&&(0,le.jsxs)(le.Fragment,{children:[d&&!s&&!r&&(0,le.jsx)(ee,{tree:o,node:c,renderId:e,className:Y(un,t&&td,g?nd:od),onClick:p}),!!m&&!t&&(0,le.jsx)(rm,{tree:o,highlightedRenderId:e,repeaterNode:m})]})]})}function om(n){let o=b(),e=(0,xt.useCallback)(()=>{o.stores.editableNodeHighlightStore.highlight(o,{type:"clickOnVoid"})},[]);return(0,le.jsx)("div",{"aria-hidden":!0,className:Y(id,n.notAllowedCursor&&rd),onClick:e})}var nm=n=>{switch(n){case"top":return sd;case"bottom":return ld;case"left":return cd;case"right":return dd}};function rm(n){let o=b(),{mouseStore:e}=o.stores,{tree:t,highlightedRenderId:r,repeaterNode:i}=n,a=E(()=>e.canvasMousePosition,[],yi),c=(0,xt.useMemo)(()=>{if(!i)return;let f=Gi(t,i);if(!f)return;let p=f.cache.domRects,m=null;for(let[d,s]of p??[])m=m?Ae.merge(m,s):s;if(m)return m},[t,i]),l=(0,xt.useMemo)(()=>{let f="bottom";if(!i)return f;let p=xi(i)&&i.stackDirection==="horizontal"&&!i.stackWrapEnabled,m=t.convertFrameToCanvas(i,c,r);if(p){let v=m.x,U=v+m.width,F=window.scrollX,P=F+window.innerWidth,N=v>=F&&v<=P,Ie=U>=F&&U<=P;if(N&&!Ie)return"left";if(Ie&&!N)return"right";if(N&&Ie){let Ke=a.x-v,Be=U-a.x;return Ke<Be?"left":"right"}return"right"}let d=m.y,s=d+m.height,g=window.scrollY,y=g+window.innerHeight,C=d>=g&&d<=y,S=s>=g&&s<=y;if(C&&!S)return"top";if(S&&!C)return"bottom";if(C&&S){let v=a.y-d,U=s-a.y;return v<U?"top":"bottom"}return f},[i,r,c,a,t.convertFrameToCanvas]);return i?(0,le.jsx)(ee,{tree:t,node:i,renderId:r,className:pd,overrideRect:c,children:(0,le.jsxs)("button",{type:"button",className:Y(fd,nm(l)),onMouseDown:()=>am(o,i.id),[rr]:"true",children:[(0,le.jsx)(ma,{className:md,children:(0,le.jsx)(ia,{})}),(0,le.jsx)("div",{className:ad})]})}):null}function im(n,o){let e=b();return(0,xt.useCallback)(()=>{if(!(!n||!o)){if(Ve.supportsNode(e,n,o))return e.startComponentInstanceEditTool(n.id,o);if(ze.supportsNode(e,n,o))return e.startDateVariableEditTool(n.id,o,"mouse");if(qe.supportsNode(e,n,o))return e.startImageEditTool(n.id,o);if(Ce.supportsNode(n))return e.startRichTextEditTool(n.id,o,"mouse");if(Ee.supportsNode(e,n,o))return e.startRichTextVariableEditTool(n.id,o,"mouse");if(Ne.supportsNode(e,n,o))return e.startStringVariableEditTool(n.id,o,"mouse");if(Ge.supportsNode(e,n,o))return e.startCollectionReferenceVariableEditTool(n.id,o,"mouse");if(We.supportsNode(e,n,o))return e.startEnumVariableEditTool(n.id,o,"mouse")}},[n,o])}function am(n,o){let{treeStore:e,projectStore:t,modalStore:r,accessStore:i}=n.stores,a=e.tree.getNodeWithTrait(o,Mn),c=Mn(a)&&Io(a)?Ri(e.tree,a.dataIdentifier):void 0,l=i.access?.userId;u(l,"User must be logged in"),u(c,"Collection node must exist");let f=To.create({isDraft:!0,privateToUserId:l});Xo(c,f),e.tree.insertNode(f,c.id,0),t.commitTreeAndSend(),r.set({type:"OnPageCMSFieldsModal",fieldIdsToShow:sn(c),requiredFieldsOnly:!1,source:"on_page_hud",collectionNodeId:c.id,collectionItemId:f.id})}var ue=h($());var xd="popout_pqnmppj";var Se=h(x()),lm=["right","left"],cm={x:15,y:0};function Ud({tool:n}){let{nodeId:o,renderId:e}=n,[t,r]=(0,ue.useState)(null),i=b(),a=E(()=>i.stores.treeStore.tree,[]),c=a.getNodeWithTrait(o,At);function l(){i.exitTool()}if(c)return(0,Se.jsx)(ee,{tree:a,node:c,renderId:e,ref:r,children:(0,Se.jsxs)(Ao,{anchor:t,alignSelf:"center",attachTo:lm,offset:cm,onClose:l,showArrow:!0,arrow:{anchor:t,alignSelf:"center"},fallbackToModalAppearance:!0,backdropTintEnabled:!1,children:[(0,Se.jsx)(Ia,{disableDivider:!0,onClose:l,children:(0,Se.jsx)(ba,{title:"Image"})}),(0,Se.jsx)("div",{className:xd,children:De(c.fillImage)?(0,Se.jsx)(dm,{node:c,dynamicValue:c.fillImage,renderId:e}):(0,Se.jsx)(mm,{node:c})})]})})}function dm({node:n,dynamicValue:o,renderId:e}){return u(D(o),"Expected variable reference"),(0,Se.jsx)(fm,{node:n,variableReference:o,renderId:e})}function fm({node:n,variableReference:o,renderId:e}){let t=b(),r=E(()=>{let p=t.stores.treeStore,m=n.cache.getRenderInstance(e);return G(p.tree,p.sandboxCollectionData,o,"image",m?.collectionItemId)},[n,e,o]);u(r,"Variable info must exist");let{collectionItemNode:i,reducedControlProp:a,controlProp:c}=r;u(a.type==="responsiveimage","Expected reduced responsive image");let l=(0,ue.useCallback)(p=>{i.set(Gn({[o.id]:p(c)})),t.stores.projectStore.commitTreeAndSend()},[i,o,c]),f=(0,ue.useCallback)(()=>{i.set(Gn({[o.id]:{type:"image",value:void 0}})),t.stores.projectStore.commitTreeAndSend()},[i,o]);return(0,Se.jsx)(Ds,{controlProp:a,onChange:l,onRemove:f,maxExtraImages:0})}function mm({node:n}){let o=b(),e=(0,ue.useMemo)(()=>{let p={...ws(),...Is()};return xs(n,p),bs(n,p),p},[n]),t=(0,ue.useCallback)(async p=>{let[m]=await p;m&&(ss(n,m),o.stores.projectStore.commitTreeAndSend())},[n]),r=(0,ue.useCallback)(p=>{ce(n.fillImage)&&(n.set({fillImage:li(n.fillImage,p)}),o.stores.projectStore.commitTreeAndSend())},[n]),i=(0,ue.useCallback)(p=>{Vi(n)&&(n.set({altAttribute:p}),o.stores.projectStore.commitTreeAndSend())},[n]),a=(0,ue.useCallback)(p=>{n.set({fillImageResize:p}),o.stores.projectStore.commitTreeAndSend()},[n]),c=(0,ue.useCallback)(p=>{n.set({fillImageTileSize:p}),o.stores.projectStore.commitTreeAndSend()},[n]),l=(0,ue.useCallback)((p,m)=>{n.set({fillImagePositionX:p,fillImagePositionY:m}),o.stores.projectStore.commitTreeAndSend()},[n]),f=(0,ue.useCallback)(()=>{n.set({fillImage:void 0}),o.stores.projectStore.commitTreeAndSend()},[n]);return(0,Se.jsx)(Bs,{...e,imageReferences:e.fillImages,altText:e.altAttribute,onChangeImages:t,onChangeAssetSize:r,onChangeAltText:i,onChangeImageResize:a,onChangeFillImageSize:c,onChangeImagePosition:l,onRemoveImage:f})}var Fd=h($());var Id="warningButton_w1uyyr5z",bd="warningButtonIcon_w1z0oe1i";var mo=h(x());function Sd({richTextNode:n,webPageNode:o}){let e=b(),t=E(()=>e.stores.treeStore.tree,[]);return(0,Fd.useMemo)(()=>{let i=t.getNodeWithTrait(n.originalid??n.id,k);return u(i,"originalNode must exist"),o.getTopLevelReplicaVariants().some(a=>{let c=ao(a.id,i.id),l=t.get(c);return k(l)&&Bo(t,l,"html")&&l.getTextContent()!==i.getTextContent()})},[t,n,o])?(0,mo.jsxs)(ra,{className:Id,onClick:()=>{e.exitTool(),e.stores.modalStore.set({richTextNodeId:n.id,source:"on_page_hud",type:"OnPageRichTextVariantOverride"})},children:[(0,mo.jsx)(ca,{viewBox:"0 0 12 12",className:bd}),(0,mo.jsx)(He,{children:"Responsive Text"})]}):null}var vd="warningContainer_w1v62ead";var jt=h(x());function Pd({tool:n}){let{nodeId:o,renderId:e}=n,t=b(),r=E(()=>t.stores.treeStore.tree,[]),i=E(()=>t.stores.toolStore.editorOverlayClipPath,[]),a=E(()=>t.stores.toolStore.proseMirrorView,[]),c=r.getNodeWithTrait(o,k),l=me();return!c||!l||!a?null:(0,jt.jsxs)(ee,{tree:r,node:c,renderId:e,children:[(0,jt.jsx)("div",{className:vd,children:(0,jt.jsx)(Sd,{richTextNode:c,webPageNode:l})}),(0,jt.jsx)(Xs,{tool:n,scopeNode:l,node:c,renderId:e,editorView:a,zoom:1,handleOutsideClick:f=>{f.target===f.currentTarget&&t.exitTool()},style:{clipPath:i}})]})}var po=h(x());function Ed({tool:n}){let{nodeId:o,renderId:e}=n,t=b(),r=E(()=>t.stores.treeStore.tree,[]),i=E(()=>t.stores.toolStore.validationWarning,[]),a=E(()=>t.stores.toolStore.editorOverlayClipPath,[]),c=r.getNodeWithTrait(o,k),l=me();return!l||!c?null:(0,po.jsxs)(ee,{tree:r,node:c,renderId:e,children:[(0,po.jsx)(mn,{validationWarning:i}),(0,po.jsx)(Zs,{tool:n,scopeNode:l,node:c,renderId:e,zoom:1,onClickOutside:f=>{f.target===f.currentTarget&&t.exitTool()},hasValidationWarning:!!i,style:{clipPath:a}})]})}var fe=h(x());function Nd(){let n=b(),{sandboxStore:o}=n.stores,{canvasHeight:e}=o.useState(),t=E(()=>n.stores.treeStore.tree.getPresetsListNode(),[]);return(0,fe.jsxs)("div",{className:Zc,style:{height:e??"initial"},children:[(0,fe.jsx)(Xc,{}),(0,fe.jsx)(gm,{}),(0,fe.jsx)(ys,{presetsListNode:t})]})}function gm(){let n=b(),{projectStore:o,modalStore:e}=n.stores,t=E(()=>n.stores.toolStore.tool,[]),r=E(()=>n.stores.canvasStore.finishedEditing,[]),{hasPermanentlyFailed:i}=o.useState(),a=e.useState(c=>c.active.type!=="None");if(!i&&!r&&!a){if(t instanceof ke)return(0,fe.jsx)(wd,{});if(t instanceof qe)return(0,fe.jsx)(Ud,{tool:t});if(t instanceof Ce)return(0,fe.jsx)(Pd,{tool:t});if(t instanceof Ee)return(0,fe.jsx)(Qc,{tool:t});if(t instanceof Ne)return(0,fe.jsx)(Ed,{tool:t});if(t instanceof ze)return(0,fe.jsx)(yd,{tool:t});if(t instanceof Ge)return(0,fe.jsx)(Hc,{tool:t});if(t instanceof We)return(0,fe.jsx)(Cd,{tool:t});if(t instanceof Ve)return(0,fe.jsx)(gd,{tool:t})}}var Le=h(x());function kd(){Lt();let n=b(),o=E(()=>n.stores.canvasStore.isHidden,[]);return(0,yn.useEffect)(()=>{let e=({data:t})=>{if(rt(t)&&t.apiVersion===1){let{type:r,position:i}=t;r==="showCanvas"&&rt(i)&&di(i.top)&&(window.scrollTo({behavior:"instant",top:i.top}),setTimeout(()=>{n.stores.canvasStore.isHidden=!1,n.startHighlightTool(),n.stores.editableNodeHighlightStore.highlight(n,{type:"start"})},0))}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[]),(0,yn.useEffect)(()=>{let{sandboxStore:e}=n.stores;o?e.hide():e.show()},[o]),ym(o),Cl({channel:ni,toast:st}),(0,Le.jsx)(ga,{children:(0,Le.jsxs)("div",{className:Y(o&&Ll),children:[(0,Le.jsx)(Nd,{}),(0,Le.jsxs)("div",{className:Kl,[nr]:"true",children:[(0,Le.jsx)(zc,{}),(0,Le.jsx)(Bc,{}),(0,Le.jsx)(Oa,{padding:80}),(0,Le.jsx)(yl,{ref:n.stores.projectStore.filePickerRef})]})]})})}function ym(n){let o=b();(0,yn.useEffect)(()=>{if(n)return;let e=new Ts;e.set("CommandOrControl+Z",o.undo.bind(o),"undo"),e.set("CommandOrControl+Shift+Z",o.redo.bind(o),"redo");function t(r){if(zo())return;let i=e.get(r);i&&(i.action(r),r.preventDefault(),r.stopPropagation())}return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},[n])}var Od=h($());function Bd(){(0,Od.useEffect)(()=>{let n=o=>{if(!rt(o.data))return;let{apiVersion:e,type:t}=o.data;e===1&&t==="enterOnPageEditing"&&Me("editor_bar_interaction",{page:"editor-bar-project-page",id:"editor-bar-enter-on-page-editing"})};return window.addEventListener("message",n),()=>window.removeEventListener("message",n)},[])}var Er=h($());var Yt="https://app.framerstatic.com/framer-logo-blue-23OMXQLR.png";var Cn="button_b9jl8lf",wn="editorBarButtonPrimary_eptse9g";var Td="backdrop_bzafg2a",Ad="container_cnhgigm",Rd="textContainer_t1ookr3o",Dd="title_tyol4w7",Md="subtitle_s7fryoi",_d="button_by9jupw",Gd="buttonsContainer_b18g1n4a",Vd="closeModal_c1gc3a0q";var Ht=h(x());function zd({width:n=10,height:o=10,className:e}){return(0,Ht.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:o,fill:"none",className:e,"aria-hidden":"true",children:(0,Ht.jsxs)("g",{transform:"translate(2 2)",children:[(0,Ht.jsx)("path",{d:"M 0 0 L 6 6",fill:"transparent",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),(0,Ht.jsx)("path",{d:"M 0 6 L 6 0",fill:"transparent",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})})}var ge=h(x());function wm({children:n,onClick:o,disabled:e,layoutId:t,duration:r}){return(0,ge.jsx)(Re.div,{layout:"position",layoutId:t,style:{width:"100%"},transition:{duration:r,type:"spring",bounce:.2,delay:0},children:(0,ge.jsx)(K,{type:"button",className:_d,onClick:o,enabled:!e,children:n})})}function Jt({logo:n,title:o,subtitle:e,buttons:t,showLearnMoreButton:r}){let i=()=>{window.open("https://www.framer.com/help/articles/on-page-editing","_blank")},a=()=>{window.parent.postMessage({apiVersion:1,type:"sandboxReadyState",data:{status:"ready"}},"*"),window.parent.postMessage({apiVersion:1,type:"exitFullscreen",position:{top:window.scrollY}},"*")};return(0,ge.jsx)(he,{className:Td,onClick:a,children:(0,ge.jsxs)(he,{className:Ad,justifyContent:"center",alignItems:"center",onClick:c=>c.stopPropagation(),children:[(0,ge.jsx)(he,{onClick:a,className:Vd,children:(0,ge.jsx)(zd,{})}),(0,ge.jsxs)(he,{className:Rd,gap:15,alignItems:"center",justifyContent:"center",children:[n,(0,ge.jsxs)(he,{gap:5,alignItems:"center",justifyContent:"center",children:[(0,ge.jsx)(Re.span,{layout:!0,className:Dd,children:o}),(0,ge.jsx)(Re.p,{layout:!0,className:Md,children:e})]})]}),t||r?(0,ge.jsxs)(he,{className:Gd,gap:10,children:[r?(0,ge.jsx)(wm,{onClick:i,children:"Learn More"}):null,t||null]}):null]})})}var xn=h(x());function Wd(){let n=b();zt("editor_bar_impression",{page:"editor-bar-cookie-prompt"});async function o(){Me("editor_bar_interaction",{page:"editor-bar-cookie-prompt",id:"editor-bar-allow-cookies"});try{await document.requestStorageAccess()}finally{await n.stores.accessStore.refresh()}}return(0,xn.jsx)(Jt,{logo:(0,xn.jsx)("img",{decoding:"async",width:36,src:Yt,alt:"Framer Logo"}),title:"Edit Page",subtitle:"Continuing may require granting permissions in a browser dialog.",buttons:(0,xn.jsx)(K,{className:Y(Cn,wn),onClick:o,variant:"primary",children:"Continue"}),showLearnMoreButton:!0})}var Sr=h(x());function qd({children:n,onClick:o,disabled:e,layoutId:t,duration:r,className:i}){return(0,Sr.jsx)(Re.div,{layout:"position",layoutId:t,style:{width:"100%"},transition:{duration:r,type:"spring",bounce:.2,delay:0},children:(0,Sr.jsx)(K,{type:"button",className:Y(Cn,i),onClick:o,enabled:!e,children:n})})}var Ld="loginButtonLoading_l4nhz4u";var Qt=h(x());function Kd(){let n=b(),{isLoginInProgress:o}=n.stores.loginStore.useState();zt("editor_bar_impression",{page:"editor-bar-guest-page"});async function e(){Me("editor_bar_interaction",{page:"editor-bar-guest-page",id:"editor-bar-login"}),await n.stores.loginStore.login()}return(0,Qt.jsx)(Jt,{logo:(0,Qt.jsx)("img",{decoding:"async",width:36,height:36,src:Yt,alt:"Framer Logo"}),title:"Edit Page",subtitle:"Edit the page directly in the browser, without opening the app.",buttons:(0,Qt.jsx)(qd,{onClick:e,disabled:o,className:wn,children:o?(0,Qt.jsx)("div",{className:Ld,children:(0,Qt.jsx)(gl,{})}):"Continue"}),showLearnMoreButton:!0})}var vr=h(x()),Um="Page Edit",Im="To edit, ask the site owner for access to the project",bm="To edit, ask the site owner for content editing permissions";function Pr({reason:n}){return zt("editor_bar_impression",{page:"editor-bar-no-access-page"}),(0,vr.jsx)(Jt,{logo:(0,vr.jsx)("img",{decoding:"async",width:36,src:Yt,alt:"Framer Logo"}),title:Um,subtitle:n==="no-permission"?bm:Im,showLearnMoreButton:!0})}var uo=h(x());function Xd(){let n=b(),{access:o}=n.stores.accessStore.useState();switch(o.status){case"no-auth":return(0,uo.jsx)(Kd,{});case"unknown":return(0,uo.jsx)(Wd,{});case"no-access":return(0,uo.jsx)(Pr,{reason:"no-access"});case"no-permission":return(0,uo.jsx)(Pr,{reason:"no-permission"});case"success":case"error":return null;default:ro(o)}}var Ut=h(x());function Zd(){let n=b(),{shouldRenderOnPageCanvas:o}=n.stores.accessStore.useState(),e=Je(()=>n.stores.routeStore.webPageNodeId,[],[n.stores.routeStore]);return(0,Er.useEffect)(()=>{e&&n.stores.sandboxStore.waitForInitialLoad(e).then(()=>{window.parent.postMessage({apiVersion:1,type:"sandboxReadyState",data:{status:"ready"}},"*")}).catch(ie)},[e]),(0,Er.useEffect)(()=>{n.performanceTracker.reportEditorBarReady()}),Bd(),(0,Ut.jsxs)(Ut.Fragment,{children:[(0,Ut.jsx)(Xd,{}),o&&(0,Ut.jsx)(kd,{})]})}var Un=class{constructor(o){this.engine=o;w(this,"state",0);w(this,"changes",new Na)}get inRendering(){return this.state===3}render(){if(this.state!==1)return;let o=this.changes,e=this.engine.stores;try{this.state=2,o.has(e.treeStore,e.routeStore)&&Vo(e.treeStore.tree,e.treeStore.layoutCache,e.treeStore.sandboxCollectionData,e.treeStore.sandboxVisibility,te.activeBundleHash,e.routeStore.localeId,void 0,e.routeStore.webPageNodeId),e.toolStore.tool?.update?.(),e.undoRedoManager.processScheduledEndUndoGroup({}),this.state=3,e.sandboxStore.update(),o.signalAllObservers(),Vl()}finally{this.state=0}}signalChanges(o){if(this.changes.addChanges(o),this.state!==0)return;this.state=1;let e=this.render.bind(this);setTimeout(e,0),Gl()}wrapHandler(o,e){let{projectStore:t}=this.engine.stores;return function(...r){let i=o.apply(this,r);return t.commitTreeAndSend(e!=="nonUserEvent"),i}}process(o,e){this.wrapHandler(o,e)()}processWhenReady(o,e){this.wrapHandler(o,e)()}async processWhenReadyAsync(o,e){return this.wrapHandler(o,e)()}runWhenIdle(o){requestIdleCallback(o)}runWithFullyLoadedTree(o,e){u(e.runInBackground,"Only background tasks are supported in the OnPageEngine for now.");let t=this.engine.tree.getService("loader"),r=()=>{o(),this.engine.stores.projectStore.commitTreeAndSend()};if(!t)return r(),lt;let i=t.prioritizeLoadingAllData({operationName:e.name,operationInBackground:!0,doNotTrack:e.doNotTrack}),a=t.afterAllDataLoaded(r);return()=>{i(),a()}}runBeforeNextFrame(o){requestAnimationFrame(o)}};var In=class extends be{constructor(e,t,r){super();this.projectStore=e;this.hostnameStore=t;this.siteId=r;w(this,"_access")}get access(){return u(this._access,"Access not initialized"),this._access}get projectId(){return jd(this.access)}get canEditContent(){let e=this.access;return e.status!=="success"?!1:e.data.permissions?.canEditContent==="on"}get shouldRenderOnPageCanvas(){return ir()&&this.canEditContent}async set(e){if(this._access=e,this.shouldRenderOnPageCanvas){let t=jd(e);e.userId&&t&&(this.projectStore.loadProject(e.userId,t),this.hostnameStore.loadHostnames(t).catch(ie))}Ki.setUserId(e.userId??"null")}async refresh(){let e=await hl(this.siteId);await this.set(e)}},Fm=/^(?<name>.+--)?(?<id>[a-z0-9]{20})(?<hash>-[a-z0-9]+)?$/iu;function jd(n){if(n.status==="success")return Fm.exec(n.data.projectSlug)?.groups?.id}var Yd,Hd,It,Nr,kr;Hd=[M()],Yd=[M()];var bt=class{constructor(o){this.scheduler=o;T(this,Nr,I(It,8,this,[])),I(It,11,this);T(this,kr,I(It,12,this)),I(It,15,this);w(this,"assetMap",new ai)}get assets(){return this._assets}get assetService(){return this._assetService}setAssetService(o){this._assetService=o,si(o,e=>{e.assets&&(this._assets=e.assets,this.assetMap.set(e.assets),nt.importCustomFonts(e.assets,it.isOn("customFontImprovements")))})}};It=ne(null),Nr=new WeakMap,kr=new WeakMap,B(It,4,"_assets",Hd,bt,Nr),B(It,4,"_assetService",Yd,bt,kr),re(It,bt);async function Jd(n){return Pa.post("/edit/notifications/page-edited",n)}var Qd,$d,ef,tf,xe,Or,Br,Tr,Ar;tf=[M()],ef=[M()],$d=[M()],Qd=[M()];var et=class{constructor(o,e,t,r,i,a,c,l,f){this.scheduler=o;this.accessStore=e;this.routeStore=t;this.treeStore=r;this.projectStore=i;this.modalStore=a;this.undoRedoManager=c;this.exitTool=l;this.onChangeRoute=f;T(this,Or,I(xe,8,this,!0)),I(xe,11,this);T(this,Br,I(xe,12,this,null)),I(xe,15,this);T(this,Tr,I(xe,16,this,window.innerWidth)),I(xe,19,this);T(this,Ar,I(xe,20,this)),I(xe,23,this);window.addEventListener("resize",()=>{this._screenWidth=window.innerWidth})}get screenWidth(){return this._screenWidth}get temporaryCollectionItemNodeId(){return this._temporaryCollectionItemNodeId}set temporaryCollectionItemNodeId(o){this._temporaryCollectionItemNodeId=o,this.onChangeRoute()}async sendNotification(o){let e=this.accessStore.projectId;u(e,"Project ID must exist");let t=$e({tree:this.treeStore.tree,webPageNodeId:this.routeStore.webPageNodeId});u(t,"Web page node must exist");let r=_e(this.routeStore,this.treeStore,this),i;if(r){let a=Kt(this.routeStore,this.treeStore,this);u(a,"Collection item exists, so its parent collection must exist"),u(a.name,"Collection node must have a name"),i={notificationType:o,projectId:e,webPageNodeId:t.id,collectionItemNodeId:r.id,collectionItemTitle:Sm(a,r),collectionTitle:a.name,pageType:"cms-detail"}}else i={notificationType:o,projectId:e,webPageNodeId:t.id,pageTitle:t.webMetadata?.title||_a(this.treeStore.tree,t),pageType:"static"};await Jd(i)}createTemporaryCollectionItem(){let o=Kt(this.routeStore,this.treeStore,this);if(!o)return;let e=this.accessStore.access?.userId;u(e,"User must be logged in");let t=o.getPrivateItemForUser(e);if(t)this.temporaryCollectionItemNodeId=t.id;else{let r=To.create({isDraft:!0,privateToUserId:e});this.treeStore.tree.insertNode(r,o.id,0),this.temporaryCollectionItemNodeId=r.id,Xo(o,r),this.projectStore.commitTreeAndSend()}}discardTemporaryCollectionItem(){let o=_e(this.routeStore,this.treeStore,this);u(o,"Collection item node must exist"),u(o.id===this.temporaryCollectionItemNodeId,"Collection item must be temporary"),this.treeStore.tree.remove(o.id),this.projectStore.commitTreeAndSend(),this.clearTemporaryItem(),this.exitFullscreen()}saveTemporaryCollectionItem(){let o=_e(this.routeStore,this.treeStore,this);u(o,"Collection item node must exist"),u(o.id===this.temporaryCollectionItemNodeId,"Collection item must be temporary"),o?.set({privateToUserId:void 0}),this.projectStore.commitTreeAndSend(),this.finishEditingWithChanges(o.id,!0)}handleFinishEditing(){this.exitTool();let o=_e(this.routeStore,this.treeStore,this);if(!!!o?.privateToUserId){if(!this.treeStore.hasChanged()){this.handleDismissFinishEditing();return}let l=this.routeStore.projectLinkNodeId;if(!l)return;this.finishEditingWithChanges(l,!1);return}let t=Kt(this.routeStore,this.treeStore,this);if(u(t&&o,"Collection node and collection item node must exist"),!o.hasData()){this.discardTemporaryCollectionItem();return}let r=Wo(t,o);Ns(t,o,r)&&this.projectStore.commitTreeAndSend();let c=Es(this.treeStore.tree,t,o,r).flatMap(l=>{let f=l.type;return wr[f]!==void 0?l.id:[]});c.length>0?this.modalStore.set({type:"OnPageCMSFieldsModal",fieldIdsToShow:c,requiredFieldsOnly:!0,source:"on_page_hud",collectionItemId:o.id,collectionNodeId:t.id}):this.saveTemporaryCollectionItem()}finishEditingWithChanges(o,e){this.finishedEditing={isNewItem:e,nodeId:o},Me("editor_bar_interaction",{page:"editor-bar-project-page",id:"editor-bar-finish-editing-with-changes"});let t=e?"page-created":"page-edited";this.sendNotification(t).catch(ie)}handleDismissFinishEditing(){this.clearTemporaryItem(),this.undoRedoManager.clearUndoStack(),this.exitFullscreen()}exitFullscreen(){window.parent.postMessage({apiVersion:1,type:"exitFullscreen",position:{top:window.scrollY}},"*"),this.isHidden=!0}clearTemporaryItem(){this.finishedEditing=null,this.temporaryCollectionItemNodeId=void 0}};xe=ne(null),Or=new WeakMap,Br=new WeakMap,Tr=new WeakMap,Ar=new WeakMap,B(xe,4,"isHidden",tf,et,Or),B(xe,4,"finishedEditing",ef,et,Br),B(xe,4,"_screenWidth",$d,et,Tr),B(xe,4,"_temporaryCollectionItemNodeId",Qd,et,Ar),re(xe,et);function Sm(n,o){let e=n.variables.find(gt);if(e?.associatedStringVariable){let t=o.getControlProp(e.associatedStringVariable);if(t&&t.type==="string"&&ce(t.value)&&t.value.trim())return t.value.trim()}return"a new page"}var bn=class{updateComponentLoader(o,e){te.setModuleRevision(e,0);for(let t of o)te.updateEntity(t.identifier,t)}};var vm=0,of,Fn,Rr,eo;of=[M()];var $t=class{constructor(o){this.scheduler=o;T(this,Rr,I(Fn,8,this)),I(Fn,11,this);T(this,eo);window.addEventListener("resize",()=>{this._editableNodesHighlight&&(this._editableNodesHighlight=void 0)})}get editableNodesHighlight(){return this._editableNodesHighlight}onChangeRoute(){this._editableNodesHighlight&&(this._editableNodesHighlight=void 0)}cleanupAnimationOnFinish(o){kt(this,eo)&&clearTimeout(kt(this,eo)),yo(this,eo,window.setTimeout(()=>{this._editableNodesHighlight=void 0},o+100))}highlight(o,{type:e}){let t=Fe({screenWidth:o.stores.canvasStore.screenWidth,tree:o.stores.treeStore.tree,webPageNodeId:o.stores.routeStore.webPageNodeId});if(!t)return;let r=[],i={x:0,y:window.scrollY,width:window.innerWidth,height:window.innerHeight},a=1/0,c=-1/0,l=!1;for(let f of t.walk())for(let[p]of f.cache.iterateRenderInstances()){if(!ke.isSelectableNode(o,f,p))continue;l=!0;let m=o.tree.convertFrameToCanvas(f,void 0,p);if(!Pm(i,m))continue;a=Math.min(a,m.y),c=Math.max(c,m.y+m.height);let d=o.tree.getRect(f,void 0,void 0,void 0,p),s=o.tree.transformMatrixToNode(f,void 0,void 0,p);r.push({renderId:p,width:d.width,height:d.height,transform:s.toString(),centerX:m.x+m.width/2,centerY:m.y+m.height/2})}if(r.length===0)st({key:"editable-nodes-highlight-empty",type:"add",text:l?"Editable content is out of view, scroll to reveal it":"Content is not editable on this page",variant:"info"}),this._editableNodesHighlight=void 0;else{let f=e==="clickOnVoid",p=f?o.stores.mouseStore.windowMousePosition.x:i.width,m=f?o.stores.mouseStore.windowMousePosition.y:i.height/2,d=f?o.stores.mouseStore.canvasMousePosition.y:o.stores.mouseStore.scrollPosition.y,s=400,g=Math.max(p,window.innerWidth-p),y=Math.max(m,window.innerHeight-m),C=Math.sqrt(g**2+y**2)+s,S=Math.max(500,e==="clickOnVoid"?C:C*2),v=5,U=Math.max(0,Math.floor(a-v)),F=Math.ceil(c+v),P=Em(r,C,p,d);this._editableNodesHighlight={animationId:`editable-nodes-highlight-${vm++}`,minY:U,maxY:F,originX:p,originY:m-U+i.y,highlights:r,minRadius:P,maxRadius:C,gradientSize:s,animationDuration:S},this.cleanupAnimationOnFinish(S)}}};Fn=ne(null),Rr=new WeakMap,eo=new WeakMap,B(Fn,4,"_editableNodesHighlight",of,$t,Rr),re(Fn,$t);function Pm(n,o){return!(o.x>=Ae.maxX(n)||Ae.maxX(o)<=n.x||o.y>=Ae.maxY(n)||Ae.maxY(o)<=n.y)}function Em(n,o,e,t){let r=1/0;for(let i of n){let a=Math.sqrt(i.width**2+i.height**2),c=Math.abs(i.centerX-e),l=Math.abs(i.centerY-t),f=Math.sqrt(c**2+l**2),p=Math.max(0,f-a/2);r=Math.min(r,p)}return Number.isFinite(r)&&r<o?r:0}var Sn=class extends as{constructor(){super(...arguments);w(this,"hostnames");w(this,"testing",{setHostnames:e=>{this.hostnames=e}})}get customHostnameString(){return this.hostnames?.find(e=>e.type==="custom")?.hostname}get defaultHostnameString(){return this.hostnames?.find(e=>e.type==="default")?.hostname}async loadHostnames(e){let{hostnames:t}=await is(e);this.hostnames=t}};var vn=class extends be{constructor(e){super();this.sandboxStore=e}async ensureModuleEvaluatedInSandbox(e){await(await this.sandboxStore.getModulesRuntime()).loadModule(e.value)}hasModuleForIdentifier(e){return!!te.componentForIdentifier(e.value)}};var Pn=class extends be{constructor(e){super();this.accessStore=e;w(this,"isLoginInProgress",!1)}login(){let e=window.open(`${wo().login}?closeAfterSuccess=true`,"_blank");return e?this.startLoginWindowClosedPolling(e):Promise.resolve()}startLoginWindowClosedPolling(e){return this.isLoginInProgress=!0,new Promise(r=>{let i=setInterval(async()=>{e.closed&&(clearInterval(i),await this.accessStore.refresh(),this.isLoginInProgress=!1,r())},500)})}};var nf,rf,af,sf,lf,cf,oe,Dr,Mr,_r,Gr,Vr;cf=[M()],lf=[M(je.isEqual)],sf=[M(je.isEqual)],af=[ht(je.isEqual)],rf=[M()],nf=[M()];var Oe=class{constructor(o){this.scheduler=o;I(oe,5,this);T(this,Dr,I(oe,8,this)),I(oe,11,this);T(this,Mr,I(oe,12,this,je(0,0))),I(oe,15,this);T(this,_r,I(oe,16,this,je(0,0))),I(oe,19,this);T(this,Gr,I(oe,20,this,!1)),I(oe,23,this);T(this,Vr,I(oe,24,this,!1)),I(oe,27,this);let e=this.onMouseMove.bind(this);document.addEventListener("mousemove",e);let t=this.onScroll.bind(this);document.addEventListener("scroll",t)}get lastUpdateType(){return this._lastUpdateType}get scrollPosition(){return this._scrollPosition}get windowMousePosition(){return this._windowMousePosition}get canvasMousePosition(){return je.add(this.windowMousePosition,this.scrollPosition)}get isHoveringChrome(){return this._isHoveringChrome}get isHoveringFloatingCanvasChrome(){return this._isHoveringFloatingCanvasChrome}onScroll(){this._scrollPosition=je(window.scrollX,window.scrollY),this._lastUpdateType="scroll"}onMouseMove(o){this._isHoveringChrome=zl(o.target),this._isHoveringFloatingCanvasChrome=Wl(o.target),this._windowMousePosition=je(o.clientX,o.clientY),this._lastUpdateType="mouseMove"}};oe=ne(null),Dr=new WeakMap,Mr=new WeakMap,_r=new WeakMap,Gr=new WeakMap,Vr=new WeakMap,B(oe,4,"_lastUpdateType",cf,Oe,Dr),B(oe,4,"_scrollPosition",lf,Oe,Mr),B(oe,4,"_windowMousePosition",sf,Oe,_r),B(oe,2,"canvasMousePosition",af,Oe),B(oe,4,"_isHoveringChrome",rf,Oe,Gr),B(oe,4,"_isHoveringFloatingCanvasChrome",nf,Oe,Vr),re(oe,Oe);var En=class extends be{constructor(){super(...arguments);w(this,"colorModel","HEX")}};var df=h($());var Nn=class extends be{constructor(e,t){super();this.assetStore=e;this.treeStore=t;w(this,"_hasPermanentlyFailed",!1);w(this,"project");w(this,"projectPromise",new Ot);w(this,"filePickerRef",(0,df.createRef)())}get hasPermanentlyFailed(){return this._hasPermanentlyFailed}getProject(){return this.projectPromise}get resourceLimits(){}get featureFlags(){}get projectLicenseType(){return"freeSite"}loadProject(e,t){Lt(),!this.project&&(this.project=new xl(this.treeStore.timeline,e,t),this.project.connect(),this.project.on("disconnect",this.onDisconnect,this),this.project.connection.on("disconnect",this.onDisconnect,this),this.project.on("update",r=>{this.treeStore.newTreeAfterRemoteUpdate(r)}),this.assetStore.setAssetService(this.project.assetService),this.projectPromise.resolve(this.project))}onDisconnect(e){ds(e)||(this._hasPermanentlyFailed=!0,e==="ClientNeedsUpdate"?st({type:"add",variant:"warning",text:"A new version of Framer is available. Please reload the page to continue working.",key:"client-outdated",duration:1/0,icon:"warning",showCloseButton:"never"}):e==="Maintenance"?st({type:"add",variant:"warning",text:"Framer is undergoing maintenance. Please reload to continue once we\u2019re back.",key:"maintenance-mode",duration:1/0,icon:"warning",showCloseButton:"never",action:{title:"Reload",onClick:()=>window.location.reload()}}):st({type:"add",variant:"error",text:"Connection error: "+e,key:"connection-error",duration:1/0,icon:"error",showCloseButton:"never"}))}commitTreeAndSend(e=!0){u(this.project,"Project must be initialized"),u(!this.hasPermanentlyFailed,"Project is permanently failed");let t=this.treeStore.timeline.commitLocalTree();this.treeStore.newTreeAfterLocalUpdate(t,e),this.project.maybeSend()}};var ff,mf,Ft,zr,Wr;mf=[M()],ff=[M()];var St=class{constructor(o,e){this.scheduler=o;this.onChangeRoute=e;w(this,"localeId",Si);T(this,zr,I(Ft,8,this)),I(Ft,11,this);T(this,Wr,I(Ft,12,this)),I(Ft,15,this);let t=({data:r})=>{if(rt(r)&&r.apiVersion===1){let{type:i,nodeIds:a}=r;if(i==="updateNodeIds"&&rt(a)&&ce(a.webPageNodeId)){let{webPageNodeId:c,collectionItemNodeId:l}=a;this._webPageNodeId=c,this._collectionItemNodeId=ce(l)?l:void 0,this.onChangeRoute()}}};window.addEventListener("message",t),window.parent.postMessage({apiVersion:1,type:"initializeComponent",component:"OnPageActiveRouteStore"},"*")}get collectionItemNodeId(){return this._collectionItemNodeId}get webPageNodeId(){return this._webPageNodeId}get projectLinkNodeId(){return this._collectionItemNodeId??this._webPageNodeId}};Ft=ne(null),zr=new WeakMap,Wr=new WeakMap,B(Ft,4,"_collectionItemNodeId",mf,St,zr),B(Ft,4,"_webPageNodeId",ff,St,Wr),re(Ft,St);var pf="iframe_icxp2h1";var kn=class extends be{constructor(e,t,r,i){super();this.componentsStore=e;this.treeStore=t;this.performanceTracker=r;this.updateGenerator=i;w(this,"config",Ba.onPageCanvas);w(this,"iframe");w(this,"remoteSandbox");w(this,"remoteControlsVisibility",new Ot);w(this,"remoteModulesRuntime",new Ot);w(this,"_canvasHeight");w(this,"webPageNodeIdToInitialLoadPromise",new Map);window.addEventListener("scroll",()=>{this.remoteSandbox?.scrollTo({behavior:"instant",top:window.scrollY})})}getControlsVisibility(){return this.remoteControlsVisibility}getModulesRuntime(){return this.remoteModulesRuntime}get canvasHeight(){return this._canvasHeight}loadSandbox(){Lt(),u(!this.iframe,"Sandbox already loaded");let e=document.createElement("iframe");e.src=this.config.url,e.allow=Ms,e.sandbox.add("allow-scripts","allow-same-origin"),e.tabIndex=-1,e.id="canvas_sandbox",e.className=pf;let t=this.initializeSandbox.bind(this,e);e.addEventListener("load",t),this.iframe=e,this.hide(),document.body.append(e)}getInitialLoadPromise(e){let t=this.webPageNodeIdToInitialLoadPromise.get(e)??new Ot;return this.webPageNodeIdToInitialLoadPromise.set(e,t),t}async waitForInitialLoad(e){this.performanceTracker.reportCanvasLoaderViewed(),await this.getInitialLoadPromise(e)}async initializeSandbox(e){let t=e.contentWindow;u(t,"Sandbox didn't load correctly");let r=new Ta(Qe);r.setLocal(Qe.channels.componentsStore,this.componentsStore),r.setLocal(Qe.channels.sandboxStore,this),r.setLocal(Qe.channels.treeStore,this.treeStore);let i=r.getRemote(Qe.channels.sandbox),a=r.getRemote(Qe.channels.controlsVisibility),c=r.getRemote(Qe.channels.modulesRuntime),l=r.getRemote(Qe.channels.flags);await r.connect({target:t,url:this.config.origin}),this.remoteSandbox=i,this.remoteControlsVisibility.resolve(a),this.remoteModulesRuntime.resolve(c),new Aa(l)}onHeightChange(e){this._canvasHeight=e}onInitialLoadComplete(e){this.performanceTracker.reportCanvasReady(),this.getInitialLoadPromise(e).resolve()}update(){let e=this.remoteSandbox;if(!e)return;let t=this.updateGenerator.getUpdate();Co(t)||e.update(t)}hide(){u(this.iframe,"Sandbox not loaded"),this.iframe.setAttribute("aria-hidden","true")}show(){u(this.iframe,"Sandbox not loaded"),this.iframe.removeAttribute("aria-hidden")}};var uf,qr;uf=[ht()];var to=class{constructor(o,e,t){this.scheduler=o;this.routeStore=e;this.treeStore=t;I(qr,5,this)}get active(){let o=$e({tree:this.treeStore.tree,webPageNodeId:this.routeStore.webPageNodeId});return V(o,"webPageNode must be defined"),o}};qr=ne(null),B(qr,2,"active",uf,to),re(qr,to);function gf({editorNode:n,screenWidth:o,tree:e,webPageNodeId:t,windowMousePositionOnToolEntry:r}){let i=Fe({screenWidth:o,tree:e,webPageNodeId:t});if(!i)return;let a=e.convertFrameToCanvas(n),c=e.getNodesInRect(i,a,!0),l=[],f=i.cache.layoutTemplateRects;if(f)for(let[v,U]of f)!U.canvasRect||!Ae.intersects(U.canvasRect,a)||l.push(new zi({zIndex:U.domRect.zIndex,id:v,parentid:i.id}));let p=c.concat(l),m=Qi(p,e,{[i.id]:l}),d=m.findIndex(v=>v.id===n.id);if(d===-1)return;let s=m.slice(d+1);if(s.length===0)return;let y=e.transformMatrixToNode(n).inverse(),C=r?{x:r.x+window.scrollX,y:r.y+window.scrollY,width:1,height:1}:void 0,S=[];for(let v of s){let U=f?.get(v.id),F=e.convertFrameToCanvas(v);if(C&&Ae.intersects(C,F))continue;let P;if(U?.canvasCorners?P=U.canvasCorners:P=e.convertCornerPointsToCanvas(v),P.length===0)continue;let N=[];for(let{x:Ie,y:Ke}of P){let Be=new DOMPoint(Ie,Ke).matrixTransform(y);N.push({x:Be.x,y:Be.y})}N.length!==0&&S.push(N)}if(S.length!==0)return{editorRect:a,polygons:S}}function yf({editorRect:n,polygons:o}){let e=`M ${-mt},${-mt} L ${-mt},${n.height+mt} L ${n.width+mt},${n.height+mt} L ${n.width+mt},${-mt} Z`;for(let t of o){let r=t[0];if(!r)continue;let i=[...t,r];for(let a of i)e+=` L ${a.x},${a.y}`;e+=" Z"}return`path("${e}")`}function hf(n){let o=[];for(let e of n){if(e.length===0)continue;let[t,...r]=e;if(!t)continue;let i=`M ${t.x},${t.y}`;for(let a of r)i+=` L ${a.x},${a.y}`;i+=" Z",o.push(i)}if(o.length!==0)return`path("${o.join(" ")}")`}var mt=100;var Cf,wf,xf,Uf,If,bf,Ff,Sf,Z,Lr,Kr,Xr,Zr,jr,oo,Yr;Sf=[M()],Ff=[M()],bf=[M()],If=[M()],Uf=[M()],xf=[M()],wf=[ht()],Cf=[ht()];var Ue=class{constructor(o,e,t,r,i){this.scheduler=o;this.treeStore=e;this.routeStore=t;this.canvasStore=r;this.mouseStore=i;I(Z,5,this);T(this,Lr,I(Z,8,this)),I(Z,11,this);T(this,Kr,I(Z,12,this,_n)),I(Z,15,this);T(this,Xr,I(Z,16,this)),I(Z,19,this);T(this,Zr,I(Z,20,this,null)),I(Z,23,this);T(this,jr,I(Z,24,this)),I(Z,27,this);T(this,oo);T(this,Yr,I(Z,28,this)),I(Z,31,this)}get tool(){return this._tool}set tool(o){yo(this,oo,this.mouseStore.windowMousePosition),this._tool!==o&&(this._tool?.stop?.(),this._tool=o)}get windowMousePositionOnToolEntry(){return kt(this,oo)}get editorClipGeometryEntry(){let o=this.nodeInTextEditorId;if(!o||o===_n)return null;let e=yt(o),t=this.treeStore.tree.get(e);if(!t)return null;let r=gf({domLayoutUpdate:this.treeStore.domLayoutUpdate,editorNode:t,screenWidth:this.canvasStore.screenWidth,tree:this.treeStore.tree,webPageNodeId:this.routeStore.webPageNodeId,windowMousePositionOnToolEntry:kt(this,oo)});return r?{nodeId:e,geometry:r}:null}get editorOverlayClipPath(){let o=this.editorClipGeometryEntry;if(o)return yf(o.geometry)}get sandboxNodeInTextEditorClipPath(){let o=this.editorClipGeometryEntry;if(o)return hf(o.geometry.polygons)}validateCollectionControl(o){let e="required";if(!o)return;let{collectionItemNode:t,variableDefinition:r,collectionNode:i,controlDescription:a,controlProp:c}=o,l;(Fo(r)||gt(r))&&(l=qo(r,i.variables,t));let f=Wo(i,t),p=r.type,m=Lo(p,a,c,l,void 0,So(r),f.get(r.id));this.validationWarning=m?.type===e?void 0:m}};Z=ne(null),Lr=new WeakMap,Kr=new WeakMap,Xr=new WeakMap,Zr=new WeakMap,jr=new WeakMap,oo=new WeakMap,Yr=new WeakMap,B(Z,4,"highlightedRenderId",Sf,Ue,Lr),B(Z,4,"nodeInTextEditorId",Ff,Ue,Kr),B(Z,4,"proseMirror",bf,Ue,Xr),B(Z,4,"proseMirrorView",If,Ue,Zr),B(Z,4,"_tool",Uf,Ue,jr),B(Z,4,"validationWarning",xf,Ue,Yr),B(Z,2,"editorClipGeometryEntry",wf,Ue),B(Z,2,"editorOverlayClipPath",Cf,Ue),re(Z,Ue);var vf,Pf,vt,Hr,Jr;Pf=[M()],vf=[M()];var Pt=class{constructor(o,e,t){this.scheduler=o;this.routeStore=e;this.undoRedoManager=t;w(this,"layoutCache",new Ja);w(this,"sandboxCollectionData",new Qa("editor"));w(this,"sandboxVisibility",new $a("editor"));T(this,Hr,I(vt,8,this,ea.createEmpty())),I(vt,11,this);T(this,Jr,I(vt,12,this,0)),I(vt,15,this);w(this,"timeline",new es(this.tree));w(this,"treeIndexes",new Qr(this))}get tree(){return this._tree}get domLayoutUpdate(){return this._domLayoutUpdate}get remoteTreeVersion(){return this.timeline.remoteTreeVersion}getChangesForUndo(){let o=this.timeline.getLatestChangesForUndo();return o?o.filter(e=>!e.ignoreInUndo):[]}hasChanged(){return this.undoRedoManager.getUndoBufferSize()>0}getPartialIndexes(){return this.treeIndexes}getLoadedIndexes(){let o=this.tree.getService("loader");if(o){let e=o.numberOfScopesToLoad();throw new Error(`Some scopes are still loading: ${e} scopes left to load`)}return this.treeIndexes}onLayoutMeasure(o){let e=this.layoutCache.processLayoutMeasurements(o);e.size===0||os(this.tree,this.layoutCache,e).size===0||this._domLayoutUpdate++}onSandboxRendered(o){let e=new Set;if(o.collectionUpdates){let t=this.sandboxCollectionData.import(o.collectionUpdates);for(let r of t){let i=yt(r);e.add(i)}}if(o.visibilityUpdates){let t=this.sandboxVisibility.import(o.visibilityUpdates);for(let r of t){let i=yt(r);e.add(i)}}if(e.size>0){let t=ts(this.tree,e);Vo(this.tree,this.layoutCache,this.sandboxCollectionData,this.sandboxVisibility,te.activeBundleHash,this.routeStore.localeId,void 0,t)}o.layoutMeasurements&&this.onLayoutMeasure(o.layoutMeasurements)}newTreeAfterRemoteUpdate(o){o.inEditor=!0,this._tree!==o&&(this._tree=o)}newTreeAfterLocalUpdate(o,e){if(o.inEditor=!0,this._tree===o)return;this._tree=o;let t=this.getChangesForUndo();e&&t.length>0&&this.undoRedoManager.addUndoEntry({changes:t})}};vt=ne(null),Hr=new WeakMap,Jr=new WeakMap,B(vt,4,"_tree",Pf,Pt,Hr),B(vt,4,"_domLayoutUpdate",vf,Pt,Jr),re(vt,Pt);var Qr=class{constructor(o){this.treeStore=o;w(this,"codeComponentNodeCache");w(this,"richTextNodeCache")}get codeComponents(){let o=this.treeStore.tree;if(this.codeComponentNodeCache?.tree===o)return this.codeComponentNodeCache.codeComponentNodes;let e=[];for(let t of o.root.walk())Pe(t)&&e.push(t);return this.codeComponentNodeCache={tree:o,codeComponentNodes:e},e}get richTextNodes(){let o=this.treeStore.tree;if(this.richTextNodeCache?.tree===o)return this.richTextNodeCache.richTextNodes;let e=[];for(let t of o.root.walk())k(t)&&e.push(t);return this.richTextNodeCache={tree:o,richTextNodes:e},e}};var On=class extends ls{};var Bn=class{constructor(o,e,t){w(this,"accessStore");w(this,"assetStore");w(this,"canvasStore");w(this,"componentsStore");w(this,"contextMenuStore");w(this,"editableNodeHighlightStore");w(this,"hostnameStore");w(this,"loadedExternalModulesStore");w(this,"loginStore");w(this,"modalStore");w(this,"modulesStore");w(this,"mouseStore");w(this,"persistedUserDefaults");w(this,"projectStore");w(this,"routeStore");w(this,"sandboxStore");w(this,"scopeStore");w(this,"toolStore");w(this,"treeStore");w(this,"undoRedoManager",new On);w(this,"vectorsStore");this.assetStore=new bt(e),this.editableNodeHighlightStore=new $t(e),this.routeStore=new St(e,()=>o.onChangeRoute()),this.componentsStore=new bn,this.contextMenuStore=rs.new(e,e),this.hostnameStore=Sn.new(e),this.modalStore=Ea.new(e,e),this.treeStore=new Pt(e,this.routeStore,this.undoRedoManager),this.projectStore=Nn.new(e,this.assetStore,this.treeStore),this.accessStore=In.new(e,this.projectStore,this.hostnameStore,t),this.loginStore=Pn.new(e,this.accessStore),this.mouseStore=new Oe(e),this.canvasStore=new et(e,this.accessStore,this.routeStore,this.treeStore,this.projectStore,this.modalStore,this.undoRedoManager,()=>o.exitTool(),()=>o.onChangeRoute()),this.toolStore=new Ue(e,this.treeStore,this.routeStore,this.canvasStore,this.mouseStore),this.scopeStore=new to(e,this.routeStore,this.treeStore),this.sandboxStore=kn.new(e,this.componentsStore,this.treeStore,o.performanceTracker,o.sandboxUpdateGenerator),this.loadedExternalModulesStore=vn.new(e,this.sandboxStore),this.modulesStore=ja.new(e,e,this.treeStore,this.loadedExternalModulesStore,{codeEditorPreviewVisible:!1,mainView:0},this.projectStore.getProject().then(r=>r.modulesAPI),()=>{throw new Error("Can't make document readonly")},async r=>{await(await this.sandboxStore.getModulesRuntime()).insertTemporaryImportMap(r)},async()=>{throw new Error("Can't load all local modules")}),this.persistedUserDefaults=En.new(e),this.vectorsStore=cs.new(e,this.modulesStore)}};var Tn=class{constructor(){w(this,"editorBarReadyAt");w(this,"canvasReadyAt");w(this,"canvasLoaderViewedAt")}get editorBarReadyMs(){let o=km();if(!(de(o)||de(this.editorBarReadyAt)))return this.editorBarReadyAt-o}get canvasReadyMs(){if(!(de(this.canvasReadyAt)||de(this.editorBarReadyAt)))return this.canvasReadyAt-this.editorBarReadyAt}get perceivedCanvasLoadMs(){if(!de(this.canvasReadyAt))return de(this.canvasLoaderViewedAt)?0:Math.min(this.canvasReadyAt-this.canvasLoaderViewedAt,0)}reportEditorBarReady(){this.editorBarReadyAt=Date.now()}reportCanvasLoaderViewed(){this.canvasLoaderViewedAt=Date.now()}reportCanvasReady(){this.canvasReadyAt=Date.now(),this.sendCanvasLoadedEvent()}sendCanvasLoadedEvent(){let{canvasReadyMs:o,editorBarReadyMs:e,perceivedCanvasLoadMs:t}=this;de(o)||de(e)||de(t)||Me("editor_bar_canvas_loaded",{editorBarReadyMs:e,canvasReadyMs:o,perceivedCanvasLoadMs:t})}};function km(){let n=new URLSearchParams(window.location.search).get("loadStart");if(!n)return;let o=Number(n);if(!Number.isNaN(o))return o}var An=class{constructor(o){this.engine=o;w(this,"partialTreeSender");w(this,"previousWebPageNodeId");w(this,"previousCollectionItemNodeId");w(this,"previousBreakpointNodeId");w(this,"previousTemporaryCollectionItemNodeId");w(this,"previousStylePresetBreakpointClassNames");w(this,"previousLocalModules");w(this,"previousDependenciesModule");w(this,"previousAssets");w(this,"previousNodeInTextEditor");w(this,"previousNodeInTextEditorClipPath")}getUpdate(){let{canvasStore:o,modulesStore:e,routeStore:t,assetStore:r,treeStore:i,toolStore:a}=this.engine.stores,c={},l=$e({tree:i.tree,webPageNodeId:t.webPageNodeId})?.id;l!==this.previousWebPageNodeId&&(this.previousWebPageNodeId=l,c.webPageNodeId=l);let f=_e(t,i,o)?.id;f!==this.previousCollectionItemNodeId&&(this.previousCollectionItemNodeId=f,c.collectionItemNodeId=f);let p=Fe({screenWidth:o.screenWidth,tree:i.tree,webPageNodeId:t.webPageNodeId})?.id;p!==this.previousBreakpointNodeId&&(this.previousBreakpointNodeId=p,c.breakpointNodeId=p);let m=o.temporaryCollectionItemNodeId??null;m!==this.previousTemporaryCollectionItemNodeId&&(this.previousTemporaryCollectionItemNodeId=m,c.temporaryCollectionItemNodeId=m);let d=i.tree.getPresetsListNode(),s=Om(d,o.screenWidth);s!==this.previousStylePresetBreakpointClassNames&&(this.previousStylePresetBreakpointClassNames=s,c.stylePresetBreakpointClassNames=s);let g=e.localModules;g!==this.previousLocalModules&&(this.previousLocalModules=g,c.localModules=new Map(g));let y=e.dependenciesModule;y!==this.previousDependenciesModule&&(this.previousDependenciesModule=y,c.dependenciesModule=y);let C=r.assets;C!==this.previousAssets&&(this.previousAssets=C,c.assets=C),this.partialTreeSender??=new Ra(i.timeline,"canvas");let S=this.partialTreeSender.update(l);Co(S)||(c.partialTreeUpdate=S);let v=a.nodeInTextEditorId??null;v!==this.previousNodeInTextEditor&&(this.previousNodeInTextEditor=v,c.nodeInTextEditorId=v);let U=a.sandboxNodeInTextEditorClipPath??null;return U!==this.previousNodeInTextEditorClipPath&&(this.previousNodeInTextEditorClipPath=U,c.nodeInTextEditorClipPath=U),c}},Om=hi((n,o)=>{let e=_s(n);return Gs(e,o)});var Rn=class{constructor(o){this.siteId=o;w(this,"name","OnPageEngine");w(this,"sandboxUpdateGenerator",new An(this));w(this,"performanceTracker",new Tn);w(this,"scheduler",new Un(this));w(this,"stores");this.stores=new Bn(this,this.scheduler,o),this.stores.projectStore.getProject().then(e=>{u(this.stores.assetStore.assetService,"assetsService must be initialized"),Ya(this,this.stores.assetStore.assetService,this.stores.projectStore.filePickerRef),Ma(e.api,this.stores.assetStore.assetService),this.stores.modulesStore.initialize().catch(ie),e.connection.on("connect",t=>{t&&this.stores.modulesStore.refresh().catch(ie)})})}get tree(){return this.stores.treeStore.tree}startHighlightTool(){this.stores.toolStore.tool=new ke(this)}startComponentInstanceEditTool(o,e){this.stores.toolStore.tool=new Ve(this,o,e)}startDateVariableEditTool(o,e,t){this.stores.toolStore.tool=new ze(this,o,e,t)}startCollectionReferenceVariableEditTool(o,e,t){this.stores.toolStore.tool=new Ge(this,o,e,t)}startEnumVariableEditTool(o,e,t){this.stores.toolStore.tool=new We(this,o,e,t)}startImageEditTool(o,e){this.stores.toolStore.tool=new qe(this,o,e)}startRichTextEditTool(o,e,t){this.stores.toolStore.tool=new Ce(this,o,e,t)}startRichTextVariableEditTool(o,e,t){this.stores.toolStore.tool=new Ee(this,o,e,t)}startStringVariableEditTool(o,e,t){this.stores.toolStore.tool=new Ne(this,o,e,t)}exitTool(){this.startHighlightTool()}onChangeRoute(){this.stores.editableNodeHighlightStore.onChangeRoute(),this.exitTool()}getStateToken(){return this.stores.undoRedoManager.getUndoBufferSize()}undo(){let{undoRedoManager:o,toolStore:e,projectStore:t}=this.stores;e.tool?.undo?e.tool.undo():o.peekUndo()&&(o.undo(this.tree),t.commitTreeAndSend(!1))}redo(){let{undoRedoManager:o,toolStore:e,projectStore:t}=this.stores;e.tool?.redo?e.tool.redo():o.peekRedo()&&(o.redo(this.tree),t.commitTreeAndSend(!1))}beginUndoGroup(){this.stores.undoRedoManager.beginUndoGroup()}endUndoGroup(){this.stores.undoRedoManager.scheduleEndUndoGroup()}};var pt=h(x());ui({enableFontStore:!0,fetchGoogleFontsList:gs,fetchFontshareFontsList:us,fetchBuiltInFontsList:ms});async function US(n,o){let e=new Rn(o);await e.stores.accessStore.set(n),e.stores.sandboxStore.loadSandbox(),ns(e.stores.assetStore.assetMap),nt.importFramerFonts(Ni),Za(),Object.assign(window,{engine:e,componentLoader:te}),ps((0,pt.jsx)(Ti.Provider,{value:e,children:(0,pt.jsx)(Os,{forceDarkMode:!0,children:(0,pt.jsx)(ua,{mode:"onPageEditing",children:(0,pt.jsxs)(Ul,{children:[(0,pt.jsx)(Zd,{}),(0,pt.jsx)(ol,{})]})})})}),document.getElementById("root"))}export{US as renderEditorBar};
//# sourceMappingURL=https://app.framerstatic.com/render-KSPAZA64.mjs.map
